(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{420:function(e,t,a){e.exports=a.p+"static/media/spinner.8e9c6f69.png"},422:function(e,t,a){e.exports=a.p+"static/media/notredame.6adb7e36.jpg"},423:function(e,t,a){e.exports=a.p+"static/media/dialogue-default-background.839ae3da.jpg"},424:function(e,t,a){e.exports=a.p+"static/media/path-default-background.f2992f47.jpg"},425:function(e,t,a){e.exports=a.p+"static/media/riddle-default-question.a3df9d75.jpg"},426:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABEAMYDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/Cu4cjPekCKowFAHTGKWigBohQDGxcemKdjFFFACKiqWIUAscnA6npTDBmZ33t8yhcYHy4JORxnv3yOBgDnMlFADUiWJNqjavYAYxSlfmHzNx29aWigD5Z+I+n+Pvjj+3z428EaT8Y/Hnw38NeEvAHhjWbez8NaZ4fnN1dalqPiGC5kmk1LTbxyNmm2oCoUUYJxkk14b+1h+0po/7GH7UPwn+E/jj9sX9oKx8VfFy4eDT9mjeBTFpibvLimu2bQFMUU037lGAYM6sOFRmHrPxf8A2j/C37IX7ZP7R3xM8bXraf4X8G/BzwTqF7OibnbbqvjHZEgyA0juyoikjc8qDIJFfyXft4/tueKv2/v2svGHxW8XHy9Q8SXmbWxikaS30qzj+W3tIjkfJEioMjGWDNjLMSAf1d/tsfCn4rfs2/sZ/Fr4j6D+1L8arzWfAfgvWfEemw3uh+DHtbiezspbmNZQmgKzIzRAHaykr0IPzV59+3v+0hpv/BOeXw9pPi79rL9p7xB428YS+X4f8GeEfCngnVNf1n59m6K2XQAApbIDSOgdlcJuKlR87/sLf8FZ1/4KS/8ABvZ+0doPirUluPi18M/hP4i0nXVkb/SNWtv7GuhbaiRklt4BWR+P3qNkKHTPvn7G9ho1x/wcJfta3PjpdPk+IVjoXhd/AUt/KvnJ4dksZBefYI3AdUW5EYndMjzH2kDlmAPPfgp/wUR1Txl8avDPgX4mfFX9vD9n3UvHUn2fwve/EXwD4I0rT9cuMbhapONCdUuMY/dvtOWVfvMqn6GtvBXxN0/9q34keD9Y/ay+MWl+FfA/gXw74rOoXek+CYnha/vNfhuzNIdCEYhii0qBlbACF5WYuuFXN/4OLNP+H4/4JDfFT/hPmtEa0s4ZfDMkhUXkWuhwLA22AW80yFlPlgERGbjYHI+Tf+Crj/Ea6/Yb/aCkvG1STxhJ8AfhEfF0ds7fbJ4f7d8R/wBprkAnJVpt+flKLLnIJWgDUb/grNffES91Wb4P+PP+CiXxy8L6HO8N34q8G/DPwRcaJKYwDIsMsmho7yqCD5ZRWIIIBHNevwftKap8bf8Agmd8Uv2gPg7+1x8dNdn+H3hPXNYOk674c8HW82nalp9jNP8AYtQt10FJExJGqsEddyklJCMNX3T+zlpXgPSfgR4NT4YroifD2HSLYeGU0hkeyaxZFMHlOM5UgKc5JJGWJr8pf2gI9HsP2vf+Cnlr8N/s3/CIzfs/X0/jmHTtosV8WPpt9hsKSouGgM5lAyTJ5pc7x8wB+ztvuEKhm3MvBb+9jvT6bCNsePTjGOlOoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD8cf+C6n7GUX7dv7cHirwLqXxK+JHgHQP+EB8F6reW3hb4Ta148j1eSHU/FyRC5GmLm3WPzZGQSsBIzEqC0Xy/CP/EMn8O518z/hf3x6ZW/iT9kbxrIGPf7ufz6HnBODj99/Ai+b/wAFSPjEp/h+FvgXAzgnOreMCenX7vH90hiMZOfx0/4LTf8AByV4s+Df/BUvwf4f+EGuPceBfgfqjR+KLaG7Mdn42u3Pl3lrKV3BooI98KNtJSffIqnZGQAeZ+Hv+CQugf8ABO/4Q/GLx54X+OXx01aS4+F/inRNR0e6/Zm8X6DY61b3OlXMfkXV9MjQ28KTGKVpJMIhgVmKhS1fp5/wUC8N/AX/AIKBXHh3xBfWf7Unw9+JXgeXzvDHjfwt8F/G1lrWj5LFog/9kYliZmy0Z5GCVZcsT7D+2P8AH7wt+1J/wRF+NHxE8G3w1Twv4y+DXiPUtOn24wj6RcAxOAWCSIwKOgI2urDBIJr5+/4K3ftEftKf8EwP2rdH/aG0G4vvid+zG1pa6V4z8FxQpHL4ZAOz7bC2ONzEN5mdoYmOQRoyPQByXwl/Zc+EJ+OHh34ifHHxz+2N+0lrXguQTeF7Lxl8E/GI0jRZSQTcLZxaRskm+VTvfP3EyMqhHtGiftufDbxN+378Ypda8K/GbVNF8QfC/wAIaPNYy/BfxbNLOF1HxYZ0ntTphkjgZLlFVpUEUpEqoztDLs8U+J//AAVF+In/AAWR+OOg/CH9ibXNU8M+DbOKz1X4gfFu50xoV0OCQrKtlawzKA1w+10ZCAZHR1+WON5K91/bg/bSsv8Agn38a/2mvi1faa2uS+Gfg94BjstLUsP7QvrjXPFtvbQkAZCtNKgYhSVQMcHBFAHzNB+xt8PvhlLrmlfBf47ft6fBn4a+IrmW7PhHQfhD4yuNP08znMq2MsmkGW3Rs5BRiwLZDE4x3XxSuv2d/wBij/gj58e/hb8J/BPxt0hNZ+HviKK51HWfg74vt7nWL2bS7pFuL6+uNMjjUlyC0kjJFGNx/dpnHS/Cr/gkZ+0Z+0V4Gt/F3x8/bC+OnhTx/rkbXh0D4Z67H4f0Tw07qPLtCqI32poznzGGwORtyxBmfiL79pb4o+Gv2O/24f2WfjtrFv4q+Inwr+Euv614e8XxwR2zeMvDNzpd0kVxLCihY7iFtkUp5y7jmTYZJQD9aoHEkKsrbgR19adUdqGW3XcCrN8xBJbbnnGT6f5xUlABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAfkH/wXn/4KhXH/AATS+MHxqfwzcNB8TviT8MPBegeFXBGdPP8Aafi9rjUATwDbowwecSyQEjaGz/MXLqUk87TSPK0sjmV3J3Mzn+Lcec89TnnnvX9ef7Zfiiz+Ev7bHxw+IeufGX4hfB3wl4H+Efgi71q68LaTo+pNeo+teK0jMseoadfN8jZC+SE5kYvuwmPQv2e/BN5+1T8GdD+IHw//AG0fjf4l8IeI7f7TY6hbaV4I2uAcMjK3h0NHIjAq0bgMjKVIBBFAH4A/8Ea/+CrEnwz/AGFv2nv2Z/Fd5dv4e8bfDDxbqPg+STdKunaoujXck1rwMLHcRRtJk4CywkgEztt/ZL/grJdftFftt/He3/ZU+EPh3xJ4B+HfiLTEuPiH8VdQ06WLT/7OkKo+l2Ep2x3ErI7B41fdI0gQmOISseW/ar8faT+0V+xx+2H4f8D/ALYfxk+ImpfBrwJrNv4q0yfR/CkWmTPLpV84tWuYNBhMit9mnST7PMsibGAeMlWr621/9lXxl4K8MXmtap+118dNN0zSbV7y/uJ9J8FxQ28EcZd5GH9gAIFVSS3XaCM9wAfnLrv7Evxg/wCDbz9oLT/iB+zrpvjf4zfs4eLntLLxt4DRG1DWtNmASIX8KRp8ztglXRV5JikAQRuv1B/wUH/Y2l/4KG/EL9p/4X299Does+Jvg98P7zRry4Ur9j1C21zxbdWvmYOYw0sSxuw6KzEAlttbX/BP74mW/wDwUt+C1x4++GX7Xv7Qt1pVjqlxo13b3uieBoLyynicqu+NNBbCyIySx/McpKpOGDKOH+Kmg6h+yf8AtU/HLxv40/ao+OWj+HfBvwr8F6nquvQ6J4Uurya3m1fxRFHE8a6CyMkbq7RskSybriXzHdfLWMAk+HH/AAcS+Hfg/wCDpvC/7R/w1+J3w0+NnhgGx1Tw/Y+G7jU7bXZ0+UT6fPEpieGdseWWZVJbarOAHbyvVPhD8Vfjd+zf+3F+1h8XvBd18NL34h/BLWvCvgzwdesf7U0fRbbS7uRpb5SAY5Z5Ssnln5kIZTjCbvsT9nvwLeftUfB/Q/iH8P8A9s/42eJvCHiS3+0WGoWumeC1Vl6MrKfD4ZJUIKsjgOpUqwBBr5r/AGo/HWkftEfsb/tjeHPBP7X/AMYPiFffBvwHrUHinS5dG8Jx6XPLLpV862r3EOgw+Yr/AGaeOT7PMskexhvUlWAB+p1s6yQKysHVvmDA5DA85HsakplsS0Ck5ywycgjr7HkfTtT6ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA+adK8Pab42/4KUfHTR9as7PVdH1L4S+B7G+sbqET291DNqnjFHhkQggq4bDKwKlSdwIPH8//AO2V8RNa/wCCbv7SH7Qfw4/Y7+IvxCuP2db77JF8SLnRNMk1S0+Hs89x5M8NteFwvnKP3KymWJ33+S0kkkPmp+1f7Z8Nk37Vvxq0HxJJ8cPDOifE74T+FNBsPFHw+8C65r09pLb6p4ne7SO4sLG6jgmWO7t8iQKdk4I9azf2O5v2Z/2JP2VLf4P+D/hz8c5vCU1tJBrA1T4DeNL6bxG8sYSaW9LaRsmMi/Iy7QgQKiKiKqqAcr4f+DHwJ+Cv/Bub8XLX9nu6s9W8Aa18I/E2oR6wBuvNYuX0e5jlnut2GW43go6MqmMr5W1dmK+ZP+Dub/grE3wx+G0X7M/grUI18QeLrdL7xtPFMFey07h4rDIO4NOQHcHBMWAMiU47DQP2bPhN+xR+xv8AtfeDfgla/tVaxb/HLwpq1r4f8E6h8GPGH9naNfS6ZdwRxW7SaWoUyvPHH5k7j5Yot7ME3n5L/aG/4IJ+H/2ofjh4q+IXiz9o39ojUvEXjDVJNVvZ5v2SPHEmGckqijZjZGpVEVQqoiKqqFAAAPkf/g3q/wCCrU//AATC/bXthr1+0fwr+InlaT4pikIMVkST9m1Hbn71uztuwcmKWYfe24/pk8NaDpPxF/4KM/GzTdRh0/XdB1z4QeCLee1uFS4tdTtpdT8Yh0YH5XR1YBgcqytgggjH4P8A/EMz8PQv/Jfv2gN2M8/sieNyMnr/AA96+8P2X/Ay/Cr4f/ET4S+LfHH7UutaLrXwq8M+BNK+IGlfAbxhpOreXZ6p4mmltUibT7h1a3tNRsovMbAkR1CksHAAPzx/bG+I+tf8E4v2jf2gvhz+xz8RfiJc/s56h9kj+I9zomlS6na/D2ee48meG2vGcATKD5KymWJ33+S0kkkXmp+uHhz4M/An4Nf8G5vxgtf2eLi11rwDq3wj8T6gusIC95q9ydGuFmnuycMlzu+V4mVWj2+XsUJgdZ+x5cfsz/sT/sqW/wAH/B/w5+OU3hOa1eDWRqnwF8a3k3iR5Ywk8t5u0jbIZANpTGwIFRAqIqj5v8OfszfCn9jT9jj9rjwX8E7X9qbWoPjh4S1ez8N+CtT+DvjGPTdEvptOu4YobeWbS0RDJJPGnmzMvypGHZipegD9ioXMkSsdvPp0/wA+9OpluV8lQu3C/L8vTjj/ACKfQAUUUUAFFFFABRRRQAUUUUANlfZEzf3QTUNxdNC8YG35mwc/Rj/SiigBRdMWX7vJApPtDGaYf3TtHX0U/wDsx/SiigAW4ZVA9OOeabJO3mI3fcF6nHJAPGcUUUAOgkMlmsh+83PU+tNllMke05w3ynDEHB44IOc+9FFAEyHzNp/vDPBNO8v/AHvzNFFAAIVDs3zZYAH5jjjPb8evfj0FGzP978zRRQAeUN4b5uP9o479vx/zgU4DAoooAKKKKACiiigAooooAKKKKACiiigAooooA//Z"},427:function(e,t,a){e.exports=a.p+"static/media/combat-default-background.01ec8566.jpg"},429:function(e,t,a){e.exports=a(916)},63:function(e,t,a){e.exports=a.p+"static/media/1.853053d1.png"},632:function(e,t,a){},648:function(e,t){},667:function(e,t){},669:function(e,t){},709:function(e,t){},711:function(e,t){},742:function(e,t){},743:function(e,t){},785:function(e,t){},856:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=856},899:function(e,t,a){var r={"./1.png":63,"./2.png":900,"./3.png":901,"./4.png":902,"./5.png":903,"./6.png":904};function n(e){var t=s(e);return a(t)}function s(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=899},900:function(e,t,a){e.exports=a.p+"static/media/2.8beca9fd.png"},901:function(e,t,a){e.exports=a.p+"static/media/3.ca3fbb30.png"},902:function(e,t,a){e.exports=a.p+"static/media/4.d8564815.png"},903:function(e,t,a){e.exports=a.p+"static/media/5.829bc12b.png"},904:function(e,t,a){e.exports=a.p+"static/media/6.81b06248.png"},905:function(e,t,a){var r={"./1.png":906,"./2.png":907,"./3.png":908};function n(e){var t=s(e);return a(t)}function s(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=905},906:function(e,t,a){e.exports=a.p+"static/media/1.f030e619.png"},907:function(e,t,a){e.exports=a.p+"static/media/2.f83fcec0.png"},908:function(e,t,a){e.exports=a.p+"static/media/3.a9361957.png"},909:function(e,t,a){var r={"./1.png":910,"./2.png":911,"./3.png":912};function n(e){var t=s(e);return a(t)}function s(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=909},910:function(e,t,a){e.exports=a.p+"static/media/1.41a5c668.png"},911:function(e,t,a){e.exports=a.p+"static/media/2.3e7de63b.png"},912:function(e,t,a){e.exports=a.p+"static/media/3.aba8f8cf.png"},913:function(e,t,a){var r={"./1.png":914,"./2.png":915};function n(e){var t=s(e);return a(t)}function s(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=913},914:function(e,t,a){e.exports=a.p+"static/media/1.b01e5de6.png"},915:function(e,t,a){e.exports=a.p+"static/media/2.adcced3f.png"},916:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(417),o=a.n(s),i=a(9),p=a(10),c=a(12),u=a(11),l=a(13),h=a(20),d=a(62),m=a(15),g=a(22),b=a(75),f=a.n(b),x=(a(445),a(24)),v=a(232),y=(a(311),a(4)),k={message:null,messageType:null},N={numDepthLevels:1},E=a(25),S={isGlobalSaving:!1,paragraphNumberTotal:1,paragraphRegister:[{depthNumber:0,paragraphNumber:1,hasLinkToNextParagraph:!1,hasLinkToPreviousParagraph:!0,paragraphType:"narration",paragraphSubTypes:{isSuddenDeath:!1,isVictory:!1,isFinalBossCombat:!1},nextParagraphs:[],previousParagraphs:[]}],paragraphLinkRegister:[]};f.a.initializeApp({apiKey:"AIzaSyAb4GBXr2OHnzMnvBrZlfWqyQt0crnmgAg",authDomain:"delendaproto.firebaseapp.com",databaseURL:"https://delendaproto.firebaseio.com",projectId:"delendaproto",storageBucket:"delendaproto.appspot.com",messagingSenderId:"598525885409"}),f.a.firestore();var P=Object(g.c)(Object(x.reactReduxFirebase)(f.a,{userProfile:"users",useFirestoreForProfile:!0}),Object(v.reduxFirestore)(f.a))(g.d)(Object(g.b)({firebase:x.firebaseReducer,firestore:v.firestoreReducer,notify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFY_USER":return Object(y.a)({},e,{message:t.message,messageType:t.messageType});default:return e}},numDepthLevels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DEPTH_LEVEL":return t.currentNumDepthLevels!==e.numDepthLevels?(console.log("sync with firestore"),console.log(t.currentNumDepthLevels),console.log(e.numDepthLevels),Object(y.a)({},e,{numDepthLevels:t.currentNumDepthLevels+1})):(console.log("normal"),Object(y.a)({},e,{numDepthLevels:e.numDepthLevels+1}));case"DECREASE_DEPTH_LEVEL":return t.currentNumDepthLevels!==e.numDepthLevels?(console.log("option 1"),console.log(t.currentNumDepthLevels),Object(y.a)({},e,{numDepthLevels:t.currentNumDepthLevels-1})):(console.log("option 2"),console.log(e.numDepthLevels),Object(y.a)({},e,{numDepthLevels:e.numDepthLevels-1}));case"CLEAR_QUEST_DATA":return Object(y.a)({},e,{numDepthLevels:1});case"SYNC_REGISTERS_IN_REDUX":return Object(y.a)({},e,{numDepthLevels:t.numDepthLevelsFromFirestore});default:return e}},paragraphData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PARAGRAPH_TO_TOTAL":return Object(y.a)({},e,{paragraphNumberTotal:e.paragraphNumberTotal+1,paragraphRegister:e.paragraphRegister.concat(t.paragraphToAddInRegister)});case"DECREASE_PARAGRAPH_FROM_TOTAL":var a=e.paragraphRegister.filter(function(e,a){return e.depthNumber===t.paragraphToDeleteInRegister.depthNumber&&e.paragraphNumber>t.paragraphToDeleteInRegister.paragraphNumber}),r=[];a.forEach(function(e){r.push({depthNumber:t.paragraphToDeleteInRegister.depthNumber,paragraphNumber:e.paragraphNumber-1})});var n=e.paragraphRegister.filter(function(e,a){return e.depthNumber<t.paragraphToDeleteInRegister.depthNumber||e.paragraphNumber<t.paragraphToDeleteInRegister.paragraphNumber&&e.depthNumber===t.paragraphToDeleteInRegister.depthNumber}),s=e.paragraphRegister.filter(function(e,a){return e.depthNumber>t.paragraphToDeleteInRegister.depthNumber}),o=[].concat(Object(E.a)(n),r,Object(E.a)(s));return Object(y.a)({},e,{paragraphNumberTotal:e.paragraphNumberTotal-1,paragraphRegister:o});case"ADD_PARAGRAPH_LINK":var i=Object(E.a)(e.paragraphRegister),p=Object(y.a)({},i.find(function(e){return e.depthNumber===t.paragraphLinkToAddInLinkRegister.depthNumber&&e.paragraphNumber===t.paragraphLinkToAddInLinkRegister.paragraphNumber}));p.previousParagraphs=Object(E.a)(p.previousParagraphs),p.hasLinkToPreviousParagraph=!0,p.previousParagraphs.push({depthNumber:t.paragraphLinkToAddInLinkRegister.depthNumberOfLinkedParagraph,paragraphNumber:t.paragraphLinkToAddInLinkRegister.paragraphNumberOfLinkedParagraph});var c=i.findIndex(function(e){return e.depthNumber===t.paragraphLinkToAddInLinkRegister.depthNumber&&e.paragraphNumber===t.paragraphLinkToAddInLinkRegister.paragraphNumber});i[c]=p;var u=Object(y.a)({},i.find(function(e){return e.depthNumber===t.paragraphLinkToAddInLinkRegister.depthNumberOfLinkedParagraph&&e.paragraphNumber===t.paragraphLinkToAddInLinkRegister.paragraphNumberOfLinkedParagraph}));u.nextParagraphs=Object(E.a)(u.nextParagraphs),u.hasLinkToNextParagraph=!0,u.nextParagraphs.push({depthNumber:t.paragraphLinkToAddInLinkRegister.depthNumber,paragraphNumber:t.paragraphLinkToAddInLinkRegister.paragraphNumber});var l=i.findIndex(function(e){return e.depthNumber===t.paragraphLinkToAddInLinkRegister.depthNumberOfLinkedParagraph&&e.paragraphNumber===t.paragraphLinkToAddInLinkRegister.paragraphNumberOfLinkedParagraph});return i[l]=u,Object(y.a)({},e,{paragraphLinkRegister:e.paragraphLinkRegister.concat(t.paragraphLinkToAddInLinkRegister),paragraphRegister:i});case"REMOVE_PARAGRAPH_LINK":var h=e.paragraphRegister,d=h.find(function(e){return e.depthNumber===t.paragraphLinkToRemoveInLinkRegister.depthNumber&&e.paragraphNumber===t.paragraphLinkToRemoveInLinkRegister.paragraphNumber});d.previousParagraphs=d.previousParagraphs.filter(function(e){return e.depthNumber!==t.paragraphLinkToRemoveInLinkRegister.depthNumberOfLinkedParagraph||e.paragraphNumber!==t.paragraphLinkToRemoveInLinkRegister.paragraphNumberOfLinkedParagraph}),0===d.previousParagraphs.length&&(d.hasLinkToPreviousParagraph=!1);var m=h.find(function(e){return e.depthNumber===t.paragraphLinkToRemoveInLinkRegister.depthNumberOfLinkedParagraph&&e.paragraphNumber===t.paragraphLinkToRemoveInLinkRegister.paragraphNumberOfLinkedParagraph});return m.nextParagraphs=m.nextParagraphs.filter(function(e){return e.depthNumber!==t.paragraphLinkToRemoveInLinkRegister.depthNumber||e.paragraphNumber!==t.paragraphLinkToRemoveInLinkRegister.paragraphNumber}),0===m.nextParagraphs.length&&(m.hasLinkToNextParagraph=!1),Object(y.a)({},e,{paragraphLinkRegister:e.paragraphLinkRegister.filter(function(e){return e.depthNumber!==t.paragraphLinkToRemoveInLinkRegister.depthNumber||e.paragraphNumber!==t.paragraphLinkToRemoveInLinkRegister.paragraphNumber||e.depthNumberOfLinkedParagraph!==t.paragraphLinkToRemoveInLinkRegister.depthNumberOfLinkedParagraph||e.paragraphNumberOfLinkedParagraph!==t.paragraphLinkToRemoveInLinkRegister.paragraphNumberOfLinkedParagraph}),paragraphRegister:h});case"SET_TO_SUDDEN_DEATH":var g=e.paragraphRegister.find(function(e){return e.depthNumber===t.paragraphToSetToSuddenDeathInRegister.depthNumber&&e.paragraphNumber===t.paragraphToSetToSuddenDeathInRegister.paragraphNumber});g.paragraphSubTypes=Object(y.a)({},g.paragraphSubTypes),g.paragraphSubTypes.isSuddenDeath=!g.paragraphSubTypes.isSuddenDeath;var b=e.paragraphRegister;return b[e.paragraphRegister.findIndex(function(e){return e.depthNumber===t.paragraphToSetToSuddenDeathInRegister.depthNumber&&e.paragraphNumber===t.paragraphToSetToSuddenDeathInRegister.paragraphNumber})]=g,Object(y.a)({},e,{paragraphRegister:b});case"SET_TO_VICTORY":var f=e.paragraphRegister.find(function(e){return e.depthNumber===t.paragraphToSetToVictoryInRegister.depthNumber&&e.paragraphNumber===t.paragraphToSetToVictoryInRegister.paragraphNumber});f.paragraphSubTypes=Object(y.a)({},f.paragraphSubTypes),f.paragraphSubTypes.isVictory=!f.paragraphSubTypes.isVictory;var x=e.paragraphRegister;return x[e.paragraphRegister.findIndex(function(e){return e.depthNumber===t.paragraphToSetToVictoryInRegister.depthNumber&&e.paragraphNumber===t.paragraphToSetToVictoryInRegister.paragraphNumber})]=f,Object(y.a)({},e,{paragraphRegister:x});case"SET_TO_FINALBOSS":var v=e.paragraphRegister.find(function(e){return e.depthNumber===t.paragraphToSetToFinalBossInRegister.depthNumber&&e.paragraphNumber===t.paragraphToSetToFinalBossInRegister.paragraphNumber});v.paragraphSubTypes=Object(y.a)({},v.paragraphSubTypes),v.paragraphSubTypes.isFinalBossCombat=!v.isFinalBossCombat;var k=e.paragraphRegister;return k[e.paragraphRegister.findIndex(function(e){return e.depthNumber===t.paragraphToSetToFinalBossInRegister.depthNumber&&e.paragraphNumber===t.paragraphToSetToFinalBossInRegister.paragraphNumber})]=v,Object(y.a)({},e,{paragraphRegister:k});case"SET_PARAGRAPH_TYPE":var N=e.paragraphRegister.find(function(e){return e.depthNumber===t.paragraphToUpdateInRegisterWithType.depthNumber&&e.paragraphNumber===t.paragraphToUpdateInRegisterWithType.paragraphNumber});N.paragraphType=t.paragraphType;for(var P=Object.keys(N.paragraphSubTypes),T={},L=0;L<P.length;L++)T[P[L]]=!1;N.paragraphSubTypes=T;var w=e.paragraphRegister;return w[e.paragraphRegister.findIndex(function(e){return e.depthNumber===t.paragraphToUpdateInRegisterWithType.depthNumber&&e.paragraphNumber===t.paragraphToUpdateInRegisterWithType.paragraphNumber})]=N,Object(y.a)({},e,{paragraphRegister:w});case"SET_PARAGRAPH_LINK_STATUS":var A=e.paragraphRegister.find(function(e){return e.depthNumber===t.paragraphToUpdateInRegisterWithLinkStatus.depthNumber&&e.paragraphNumber===t.paragraphToUpdateInRegisterWithLinkStatus.paragraphNumber});"next"===t.nextorprevious?A.hasLinkToNextParagraph=t.status:"previous"===t.nextorprevious&&(A.hasLinkToPreviousParagraph=t.status);var O=e.paragraphRegister;return O[e.paragraphRegister.findIndex(function(e){return e.depthNumber===t.paragraphToUpdateInRegisterWithLinkStatus.depthNumber&&e.paragraphNumber===t.paragraphToUpdateInRegisterWithLinkStatus.paragraphNumber})]=A,Object(y.a)({},e,{paragraphRegister:O});case"SYNC_REGISTERS_IN_REDUX":return Object(y.a)({},e,{paragraphRegister:t.paragraphRegisterFromFirestore,paragraphLinkRegister:t.paragraphLinkRegisterFromFirestore});case"CLEAR_QUEST_DATA":return Object(y.a)({},e,{paragraphNumberTotal:1,paragraphRegister:[{depthNumber:0,paragraphNumber:1,hasLinkToNextParagraph:!1,hasLinkToPreviousParagraph:!0,paragraphType:"narration",paragraphSubTypes:{isSuddenDeath:!1,isVictory:!1,isFinalBossCombat:!1},nextParagraphs:[],previousParagraphs:[]}],paragraphLinkRegister:[]});case"SET_TO_GLOBAL_SAVING":return Object(y.a)({},e,{isGlobalSaving:!e.isGlobalSaving});default:return e}}}),{},Object(g.c)(Object(x.reactReduxFirebase)(f.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),T=a(230),L=a.n(T),w=a(233),A=a(420),O=a.n(A);function R(){return n.a.createElement("div",{style:{height:"100%",width:"100%"}},n.a.createElement("img",{src:O.a,alt:"Loading...",style:{height:"100px",width:"100px",display:"block",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",zIndex:2}}))}var I=L()({}),D=Object(w.connectedRouterRedirect)({wrapperDisplayName:"UserIsAuthenticated",AuthenticatingComponent:R,allowRedirectBack:!0,redirectPath:function(e,t){return I.getRedirectQueryParam(t)||"/login"},authenticatingSelector:function(e){var t=e.firebase,a=t.auth,r=(t.profile,t.isInitializing);return!a.isLoaded||!0===r},authenticatedSelector:function(e){var t=e.firebase.auth;return t.isLoaded&&!t.isEmpty}}),C=Object(w.connectedRouterRedirect)({wrapperDisplayName:"UserIsNotAuthenticated",AuthenticatingComponent:R,allowRedirectBack:!1,redirectPath:function(e,t){return I.getRedirectQueryParam(t)||"/questeditor/menu/"},authenticatingSelector:function(e){var t=e.firebase,a=t.auth,r=t.isInitializing;return!a.isLoaded||!0===r},authenticatedSelector:function(e){var t=e.firebase.auth;return t.isLoaded&&t.isEmpty}}),j=(a(632),a(1)),U=a.n(j),B=a(3),F=function(e,t){return{type:"NOTIFY_USER",message:e,messageType:t}},M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={isAuthenticated:!1},a.onLogoutClick=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=a.props,n=r.firebase,s=r.notifyUser,o=a.props.notify,i=o.message,p=o.messageType,!i&&!p){e.next=6;break}return e.next=6,s(null,null);case 6:n.logout();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.isAuthenticated,t=this.props.auth;return n.a.createElement("div",null,n.a.createElement("nav",{className:"navbar navbar-expand-md bg-dark mb-2"},n.a.createElement("div",{className:"container"},n.a.createElement(h.b,{to:"/home",className:"navbar-brand text-light"},"Home"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarMain"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarMain"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement("a",{className:"nav-link dropdown-toggle text-light",href:"#",id:"dropdown03","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Players"),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdown03"},n.a.createElement(h.b,{to:"/playerprofile",className:"dropdown-item text-dark"},"Profile"),n.a.createElement(h.b,{to:"/playerranking",className:"dropdown-item text-dark"},"Ranking"),n.a.createElement(h.b,{to:"/playerforum",className:"dropdown-item text-dark"},"Forum"))),n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement("a",{className:"nav-link dropdown-toggle text-light",href:"#",id:"dropdown03","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Scribes"),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdown03"},n.a.createElement(h.b,{to:"/questeditor/menu/",className:"dropdown-item text-dark"},"Quest Editor"),n.a.createElement(h.b,{to:"/scribeprofile",className:"dropdown-item text-dark"},"Profile"),n.a.createElement(h.b,{to:"/scriberanking",className:"dropdown-item text-dark"},"Ranking"),n.a.createElement(h.b,{to:"/scribeforum",className:"dropdown-item text-dark"},"Forum"))),n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(h.b,{to:"/marketplace",className:"nav-link text-light"},"Marketplace"))),e?n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{href:"#!",className:"nav-link text-light"},t.email)),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{href:"#!",className:"nav-link text-light",onClick:this.onLogoutClick},"Logout"))):null,e?null:n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.b,{to:"/login",className:"nav-link text-light"},"Login")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.b,{to:"/register",className:"nav-link text-light"},"Register")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.auth.uid?{isAuthenticated:!0}:{isAuthenticated:!1}}}]),t}(r.Component),Q=Object(g.c)(Object(x.firebaseConnect)(),Object(m.connect)(function(e,t){return{auth:e.firebase.auth,notify:e.notify}},{notifyUser:F}))(M),z=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.firebase.auth().currentUser;return e.displayName?n.a.createElement("div",{className:"container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}},n.a.createElement("h1",{style:{margin:"auto",display:"block",textAlign:"center"}},"Welcome, ".concat(e.displayName," !")),n.a.createElement("div",{style:{height:"30px"}}),n.a.createElement(h.b,{to:"/questeditor/newquest/",className:"btn btn-dark",style:{width:"25%",margin:"auto",display:"block"}},"New Quest"),n.a.createElement("div",{style:{height:"30px"}}),n.a.createElement(h.b,{to:"/questeditor/inprogress/",className:"btn btn-dark",style:{width:"25%",margin:"auto",display:"block"}},"Quests In Progress"),n.a.createElement("div",{style:{height:"30px"}}),n.a.createElement(h.b,{to:"/questeditor/submitted/",className:"btn btn-dark",style:{width:"25%",margin:"auto",display:"block"}},"Quests Submitted")):n.a.createElement(R,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}})}}]),t}(r.Component),G=Object(x.firebaseConnect)()(z),H=a(30),V=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,r=e.getFullYear();return t<10&&(t="0"+t),a<10&&(a="0"+a),"".concat(t,"/").concat(a,"/").concat(r)},q={Title:"",Tags:"",Price:0,Level:1,Link:"",Location:[],Summary:"",NbParagraphs:1,numDepthLevels:1,paragraphRegister:[{depthNumber:0,paragraphNumber:1,hasLinkToNextParagraph:!1,hasLinkToPreviousParagraph:!0,paragraphType:"narration",paragraphSubTypes:{isSuddenDeath:!1,isVictory:!1,isFinalBossCombat:!1},nextParagraphs:[],previousParagraphs:[]}],paragraphLinkRegister:[],CreationDate:"",LastEditDate:"",SubmissionDate:"",Status:"In Progress",ScribeID:"",ScribeName:"",ScribeEmail:"",Paragraphs:[],globalSaveCounter:0},K=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state=q,a.onChange=function(e){return a.setState(Object(H.a)({},e.target.name,e.target.value))},a.onSubmit=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props.firebase.auth().currentUser,n=r.uid,s=r.displayName,o=r.email,e.next=7,a.setState({CreationDate:V(),LastEditDate:V(),ScribeID:n,ScribeName:s,ScribeEmail:o});case 7:return i=a.state,p=a.props.firestore,e.next=11,p.add({collection:"QuestsInProgress"},i);case 11:c=e.sent,a.props.history.push("/questeditor/questbuilder/".concat(c.id));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px",width:"60%"}},n.a.createElement("h1",{style:{margin:"auto",display:"block",textAlign:"center"}},"Quest Parameters"," "),n.a.createElement("div",{style:{height:"30px"}}),n.a.createElement("div",{className:"row"},n.a.createElement(h.b,{to:"/questeditor/menu/",className:"btn",id:"BackToMenu"},n.a.createElement("i",{className:"fas fa-arrow-circle-left",id:"BackToMenu"})," Back to Menu")),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestTitle"},"Title"),n.a.createElement("input",{type:"text",className:"form-control",name:"Title",placeholder:"Into the Abyss",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},value:this.state.title,onChange:this.onChange,required:!0})),n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestTags"},"Tags"),n.a.createElement("input",{type:"text",className:"form-control",name:"Tags",placeholder:"#horror #riddle #dark",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},value:this.state.tags,onChange:this.onChange,required:!0}))),n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestPrice"},"Price"),n.a.createElement("input",{type:"text",className:"form-control",name:"Price",placeholder:"2000",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},value:this.state.price,onChange:this.onChange,required:!0})),n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestLevel"},"Level"),n.a.createElement("input",{type:"text",className:"form-control",name:"Level",placeholder:"1",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},value:this.state.level,onChange:this.onChange,required:!0}))),n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestLink"},"Link"),n.a.createElement("input",{type:"text",className:"form-control",name:"Link",placeholder:"Linked to Quest sg7uwerh3 : Wandering In The Desert",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},value:this.state.link,onChange:this.onChange})),n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestLocation"},"Location"),n.a.createElement("input",{type:"text",className:"form-control",name:"Location",placeholder:"GPS coordinates -22.5834697346",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},value:this.state.location,onChange:this.onChange,required:!0}))),n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px",paddingBottom:"10px"}},n.a.createElement("label",{className:"label-parameter",htmlFor:"Text"},"Summary"),n.a.createElement("textarea",{type:"text",className:"form-control",name:"Summary",maxLength:"100",placeholder:"You will enter the Abyss of Agamazos, where many heroes have perished. Fire demons and the Crystal Magician await you there...",rows:"2",required:!0,style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},value:this.state.summary,onChange:this.onChange})),n.a.createElement("div",{style:{height:"10px"}}),n.a.createElement("button",{type:"submit",className:"btn btn-dark",style:{left:"50%",position:"absolute",transform:"translateX(-50%)",marginTop:"15px"}},"Save and start creating"," ")))}}]),t}(r.Component),W=Object(g.c)(Object(x.firestoreConnect)([{collection:"QuestsInProgress"}]),Object(m.connect)(function(e,t){return{questsInProgress:e.firestore.ordered.QuestsInProgress}}))(K),X=["88ghIWMAMIOxmF5VQ6PP50QqnKO2"],_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={questsInProgressTotal:null,questsInProgressFromScribeTotal:null,questsInProgressFromScribe:null},a.onDeleteClick=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props.firestore,n=t.target.getAttribute("data-id"),s=t.target.getAttribute("data-title"),!window.confirm('Are you sure you want to delete the Quest "'.concat(s,'" ? \n \n All content will be deleted and CANNOT BE RECOVERED.'))){e.next=14;break}return e.next=6,r.delete({collection:"QuestsInProgress",doc:n});case 6:return o=a.props.firebase.storage(),i=o.ref(),p=i.child("".concat(n)),e.next=11,p.listAll();case 11:return c=e.sent,e.next=14,c.prefixes.forEach(function(){var e=Object(B.a)(U.a.mark(function e(t){var a,r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.listAll();case 2:return a=e.sent,e.next=5,a.items.forEach(function(e){return e.delete()});case 5:return e.next=7,t.child("Outcomes").child("Sounds").listAll();case 7:return r=e.sent,e.next=10,r.items.forEach(function(e){return e.delete()});case 10:return e.next=12,t.child("Outcomes").child("Images").listAll();case 12:return n=e.sent,e.next=15,n.items.forEach(function(e){return e.delete()});case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSubmitClick=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.getAttribute("data-id"),n=Object(y.a)({},a.props.questsInProgress.find(function(e){return e.id===r})),console.log(JSON.stringify(n)),1===n.globalSaveCounter){e.next=7;break}window.alert("You must do a Global Save before you can submit this Quest."),e.next=35;break;case 7:if(n.Paragraphs.some(function(e){return!0===e.paragraphSubTypes.isVictory})){e.next=11;break}window.alert("The Quest must have at least one Victory Paragraph. Please edit the Quest and make a Global Save."),e.next=35;break;case 11:if(n.Paragraphs.some(function(e){return!0===e.paragraphSubTypes.isFinalBossCombat})){e.next=15;break}window.alert("The Quest must have at least one Final Boss Paragraph. Please edit the Quest and make a Global Save."),e.next=35;break;case 15:if(n.Paragraphs.every(function(e){return!0===e.hasLinkToPreviousParagraph})){e.next=19;break}window.alert("All Paragraphs of the Quest must be linked to at least one previous Paragraph. Please edit the Quest and make a Global Save."),e.next=35;break;case 19:if(n.Paragraphs.every(function(e){return!0===e.hasLinkToNextParagraph||!0===e.paragraphSubTypes.isVictory||!0===e.paragraphSubTypes.isSuddenDeath})){e.next=23;break}window.alert("All Paragraphs of the Quest must be linked to at least one next Paragraph or be of Victory or Sudden Death type. Please edit the Quest and make a Global Save."),e.next=35;break;case 23:if(!window.confirm("Are you sure you want to submit the Quest '".concat(n.Title,"'?"))){e.next=35;break}return n.Status="Submitted",n.SubmissionDate=V(),e.next=28,a.props.firestore.add({collection:"QuestsSubmitted"},n);case 28:return s=e.sent,e.next=31,a.props.firestore.update({collection:"QuestsSubmitted",doc:s.id},{id:s.id});case 31:return e.next=33,a.props.firestore.delete({collection:"QuestsInProgress",doc:r});case 33:window.alert("Your Quest has been properly submitted and will now be reviewed by the Team."),a.props.history.push("/questeditor/submitted/");case 35:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.questsInProgressFromScribe,r=t.questsInProgressFromScribeTotal;return a?n.a.createElement("div",{className:"container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}},n.a.createElement("div",{className:"row"},n.a.createElement(h.b,{to:"/questeditor/menu/",className:"btn",id:"BackToMenu"},n.a.createElement("i",{className:"fas fa-arrow-circle-left",id:"BackToMenu"})," Back to Menu")),n.a.createElement("h3",null,"Quests In Progress : ",n.a.createElement("span",null,r)),n.a.createElement("table",{className:"table"},n.a.createElement("thead",{className:"thead-inverse"},n.a.createElement("tr",null,n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Date of creation"),n.a.createElement("th",null,"Date of last edit"),n.a.createElement("th",null,"Nb of paragraphs"),n.a.createElement("th",null,"Actions"))),n.a.createElement("tbody",null,a.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.Title),n.a.createElement("td",null,t.CreationDate),n.a.createElement("td",null,t.LastEditDate),n.a.createElement("td",null,t.NbParagraphs),n.a.createElement("td",null,n.a.createElement(h.b,{to:"/questeditor/details/".concat(t.id),className:"btn btn-secondary btn-sm"},n.a.createElement("i",{className:"fas fa-arrow-circle-right"})," Edit"),n.a.createElement("button",{"data-id":t.id,"data-title":t.Title,onClick:e.onDeleteClick,className:"btn btn-secondary btn-sm"},n.a.createElement("i",{className:"fas fa-ban"})," Delete"),n.a.createElement("button",{"data-id":t.id,"data-title":t.Title,onClick:e.onSubmitClick,className:"btn btn-secondary btn-sm"},n.a.createElement("i",{className:"fas fa-arrow-circle-up"})," Submit")))})))):n.a.createElement(R,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.questsInProgress,r=e.firebase.auth().currentUser;if(a){if(X.includes(r.uid))var n=a;else n=a.filter(function(e){return e.ScribeID===r.uid});return{questsInProgressFromScribeTotal:n.length,questsInProgressFromScribe:n}}return null}}]),t}(r.Component),Y=Object(g.c)(Object(x.firestoreConnect)([{collection:"QuestsInProgress"}]),Object(m.connect)(function(e,t){return{questsInProgress:e.firestore.ordered.QuestsInProgress}}))(_),J=a(236),Z=a.n(J),$=a(75);a(311);var ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={questsSubmittedTotal:null,questsSubmittedFromScribeTotal:null},a.onGenerateVerifier=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c,u,l,h,d,m,g;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.getAttribute("data-id"),n=Object(y.a)({},a.props.questsSubmitted.find(function(e){return e.id===r})),s=n.Paragraphs,o=[],s.forEach(function(e){var t=o.findIndex(function(t){return t.depthNumber>e.depthNumber||t.depthNumber===e.depthNumber&&t.paragraphNumber>e.paragraphNumber});-1===t?o.push(e):0===t?o.unshift(e):o.splice(t,0,e)}),(i=[])[o.length]=[o.length],i[o.length+1]=[o.length+1],o.forEach(function(e,t){var a=[];e.nextParagraphs.length>0?e.nextParagraphs.forEach(function(e){var t=o.findIndex(function(t){return e.paragraphNumber===t.paragraphNumber&&e.depthNumber===t.depthNumber});a.push(t)}):!0===e.paragraphSubTypes.isSuddenDeath?a=[o.length]:!0===e.paragraphSubTypes.isVictory?a=[o.length+1]:window.alert("Error in creating paragraphsMapping."),i[t]=a}),p=[],i.forEach(function(e){return p.push(e.length)}),c="",i.forEach(function(e){return c=c.concat(",[".concat(e,"]"))}),c=c.substring(1),e.next=16,a.setState({paragraphsMapping:"[".concat(c,"]"),mappingLength:i.length});case 16:return u=a.props.firebase,l="\n    \n    template Quest(n) {\n        signal private input moves[n];\n        signal output outcome;\n       \n    \n        var paragraphsMapping = [".concat(c,"];\n        var outcomeArrayLengths = [").concat(p,"];    \n\n        var movesnumber = 0;\n        var j = 0;\n        var i;\n        var k;\n\n    for (i=0; i<n; i++) {\n\n        movesnumber++;\n\n                for (k = 0 ; k < outcomeArrayLengths[j]; k++ ) {\n                \n                    if (moves[i] == paragraphsMapping[j][k]) {\n                        movesnumber--;\n                        j = moves[i];\n\n                        if (j == ").concat(o.length+1," && movesnumber == 0) {\n                            i = n;\n                            outcome <-- 1;\n                    }\n                }                    \n            }       \n    }\n\n\n        // check that player has reached a victory paragraph as his last move\n        outcome === 1;\n\n    }\n    \n    component main = Quest(").concat(i.length,");"),h=u.functions().httpsCallable("generateAndDeployVerifier"),e.next=21,h(l);case 21:return d=e.sent,console.log(d.data),m=new File([d.data.verifierCode],"verifier.sol"),u.uploadFile(r,m,null,{name:"verifier.sol"}),g=new File([l],"circuit.circom"),u.uploadFile(r,g,null,{name:"circuit.circom"}),e.next=29,a.setState({cirDef:d.data.cirDef,verifierCode:d.data.verifierCode,provingKey:d.data.provingKey,verificationKey:d.data.verificationKey});case 29:window.alert("Verifier contract created and saved !");case 30:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDeployVerifier=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c,u,l;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.getAttribute("data-id"),void 0==(n=Object(y.a)({},a.props.questsSubmitted.find(function(e){return e.id===r}))).verifierContractAddress){e.next=5;break}if(window.confirm("A Verifier contract has already been deployed at the address ".concat(n.verifierContractAddress,". Are you sure you want to deploy a Verifier contract again for this Quest ?"))){e.next=5;break}return e.abrupt("return");case 5:return s=a.props.firebase.storage(),o=s.ref(),o.child("".concat(r,"/verifier.sol")).getDownloadURL().then(function(e){return console.log(e)}).catch(function(e){console.log(e),window.alert("No verifier.sol file was found !")}),i=$.functions().httpsCallable("deployVerifierContract"),e.next=12,i(a.state.verifierCode);case 12:return p=e.sent,e.next=15,a.setState({contractInterface:p.data.interface});case 15:return c=new Z.a(window.web3.currentProvider),u=function(){var e=Object(B.a)(U.a.mark(function e(){var t,a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.eth.getAccounts();case 2:return t=e.sent,console.log(t),console.log("Attempting to deploy from account ",t[0]),e.next=7,new c.eth.Contract(JSON.parse(p.data.interface)).deploy({data:p.data.bytecode}).send({gas:"2000000",from:t[0]});case 7:return a=e.sent,console.log("Contract deployed to ",a.options.address),e.abrupt("return",a.options.address);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=19,u();case 19:return l=e.sent,e.next=22,a.props.firestore.update({collection:"QuestsSubmitted",doc:r},{verifierContractAddress:l});case 22:window.alert("Contract deployed at address ".concat(l," !"));case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onGenerateInputProofAndVerify=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=(r=window.prompt("The paragraphs mapping is ".concat(a.state.paragraphsMapping," Please enter the paragraph plays to test."))).toString(),n=[],n=r.split(" "),s=a.state.mappingLength-n.length,o=0;o<s;o++)n.push("0");return i='{ "moves": ['.concat(n,"] }"),p=$.functions().httpsCallable("generateInputProofAndVerify"),(c={}).cirDef=a.state.cirDef,c.provingKey=a.state.provingKey,c.inputJSON=i,c.verificationKey=a.state.verificationKey,e.next=15,p(c);case 15:return u=e.sent,e.next=18,a.setState({proofJSONresponse:u.data.proofJSONresponse,publicJSONresponse:u.data.publicJSONresponse});case 18:window.alert(u.data.message);case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onTestVerifierContract=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c,u,l,h,d,m;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.target.getAttribute("data-id"),o=Object(y.a)({},a.props.questsSubmitted.find(function(e){return e.id===s})),(i={}).publicJSONresponse=a.state.publicJSONresponse,i.proofJSONresponse=a.state.proofJSONresponse,p=$.functions().httpsCallable("testVerifierContract"),e.next=8,p(i);case 8:return c=e.sent,console.log(c),u=o.verifierContractAddress,l=new Z.a(window.web3.currentProvider),e.next=14,new l.eth.Contract(JSON.parse(a.state.contractInterface),u);case 14:return(h=e.sent).setProvider(window.web3.currentProvider),d=JSON.parse("["+c.data+"]"),(r=console).log.apply(r,Object(E.a)(d)),e.next=20,(n=h.methods).verifyProof.apply(n,Object(E.a)(d)).call();case 20:m=e.sent,window.alert(m);case 22:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onWithdrawClick=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.getAttribute("data-id"),"Submitted"===(n=Object(y.a)({},a.props.questsSubmitted.find(function(e){return e.id===parseInt(r,10)}))).Status){e.next=6;break}window.alert("You cannot withdraw this Quest."),e.next=18;break;case 6:if(!window.confirm("Are you sure you want to withdraw the Quest '".concat(n.Title,"' ?"))){e.next=18;break}return n.Status="Withdrawn",n.SubmissionDate="",e.next=11,a.props.firestore.add({collection:"QuestsInProgress"},n);case 11:return s=e.sent,e.next=14,a.props.firestore.update({collection:"QuestsInProgress",doc:s.id},{id:s.id});case 14:return e.next=16,a.props.firestore.delete({collection:"QuestsSubmitted",doc:r});case 16:window.alert("Your Quest has been properly withdrawn and you can now access it in the Quest Editor."),a.props.history.push("/questeditor/inprogress/");case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.questsSubmittedFromScribe,r=t.questsSubmittedFromScribeTotal;return function(){var e=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.web3.currentProvider.enable();case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),a?n.a.createElement("div",{className:"container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}},n.a.createElement("div",{className:"row"},n.a.createElement(h.b,{to:"/questeditor/menu/",className:"btn",id:"BackToMenu"},n.a.createElement("i",{className:"fas fa-arrow-circle-left",id:"BackToMenu"})," Back to Menu")),n.a.createElement("h3",null,"Quests Submitted : ",n.a.createElement("span",null,r)),n.a.createElement("table",{className:"table"},n.a.createElement("thead",{className:"thead-inverse"},n.a.createElement("tr",null,n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Date of submission"),n.a.createElement("th",null,"Status"),n.a.createElement("th",null,"Actions"))),n.a.createElement("tbody",null,a.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.Title),n.a.createElement("td",null,t.SubmissionDate),n.a.createElement("td",null,t.Status),"Submitted"===t.Status?n.a.createElement("td",null,n.a.createElement("button",{"data-id":t.id,"data-title":t.Title,onClick:e.onWithdrawClick,className:"btn btn-secondary btn-sm"},n.a.createElement("i",{className:"fas fa-arrow-circle-down"})," Withdraw"),n.a.createElement("button",{"data-id":t.id,"data-title":t.Title,onClick:e.onGenerateVerifier,className:"btn btn-secondary btn-sm"},"Generate Verifier"),n.a.createElement("button",{"data-id":t.id,"data-title":t.Title,onClick:e.onDeployVerifier,className:"btn btn-secondary btn-sm"},"Deploy Verifier"),n.a.createElement("button",{"data-id":t.id,"data-title":t.Title,onClick:e.onGenerateInputProofAndVerify,className:"btn btn-secondary btn-sm"},"Test Proof"),n.a.createElement("button",{"data-id":t.id,"data-title":t.Title,onClick:e.onTestVerifierContract,className:"btn btn-secondary btn-sm"},"Test Verifier")):n.a.createElement("td",null," "))})))):n.a.createElement(R,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.questsSubmitted,r=e.firebase.auth().currentUser;if(a){if(X.includes(r.uid))var n=a;else n=a.filter(function(e){return e.ScribeID===r.uid});return{questsSubmittedFromScribeTotal:n.length,questsSubmittedFromScribe:n}}return null}}]),t}(r.Component),te=Object(g.c)(Object(x.firestoreConnect)([{collection:"QuestsSubmitted"}]),Object(m.connect)(function(e,t){return{questsSubmitted:e.firestore.ordered.QuestsSubmitted}}))(ee),ae=a(6),re=a(76),ne=a.n(re),se=a(422),oe=a.n(se),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={narrationInputText:"",backgroundImageCounter:0,startingSoundCounter:0,outcomeSoundArray:[]},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t,r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.props.QuestUnderEdition){e.next=10;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=10;break}return t=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({narrationInputText:t.inputText});case 5:if(!t.nextParagraphs.some(function(e){return void 0!==e.outcomeSoundURL})){e.next=10;break}return r=[],t.nextParagraphs.forEach(function(e,t){void 0!==e.outcomeSoundURL&&(r[t]={outcomeSoundCounter:0,rankInNextParagraphs:t,outcomeSoundURL:e.outcomeSoundURL})}),e.next=10,a.setState({outcomeSoundArray:r});case 10:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.id===t.id){e.next=10;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=10;break}return r=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({narrationInputText:r.inputText});case 5:if(!r.nextParagraphs.some(function(e){return void 0!==e.outcomeSoundURL})){e.next=10;break}return n=[],r.nextParagraphs.forEach(function(e,t){void 0!==e.outcomeSoundURL&&(n[t]={outcomeSoundCounter:0,rankInNextParagraphs:t,outcomeSoundURL:e.outcomeSoundURL})}),e.next=10,a.setState({outcomeSoundArray:n});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.loadStartingSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=9;break;case 5:return e.next=7,a.setState({startingSound:r,startingSoundCounter:1});case 7:document.getElementById("startingSoundControls ".concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber)).src=URL.createObjectURL(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadOutcomeSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=11;break;case 5:return n=a.state.outcomeSoundArray,s=parseInt(t.target.getAttribute("rankinnextparagraphs"),10),o=URL.createObjectURL(r),n[s]={outcomeSound:r,outcomeSoundCounter:1,rankInNextParagraphs:s,outcomeSoundURL:o},e.next=11,a.setState({outcomeSoundArray:n});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToSuddenDeath=function(){a.props.setToSuddenDeath()},a.setToVictory=function(e){a.props.setToVictory(e.target)},a.deleteParagraph=function(e){a.props.deleteParagraph(e)},a.saveParagraph=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=[]).push(a.state.narrationInputText),!a.state.backgroundImage||1!==a.state.backgroundImageCounter){e.next=9;break}return n.push(a.state.backgroundImage),e.next=7,a.setState({backgroundImageCounter:0});case 7:e.next=10;break;case 9:a.state.backgroundImage&&0===a.state.backgroundImageCounter?n.push("already uploaded"):n.push(null);case 10:if(!a.state.startingSound||1!==a.state.startingSoundCounter){e.next=16;break}return n.push(a.state.startingSound),e.next=14,a.setState({startingSoundCounter:0});case 14:e.next=17;break;case 16:a.state.startingSound&&0===a.state.startingSoundCounter?n.push("already uploaded"):n.push(null);case 17:return s=[],a.state.outcomeSoundArray.forEach(function(e){return s.push(Object(y.a)({},e))}),n.push(s),(o=a.state.outcomeSoundArray).map(function(e){return e.outcomeSoundCounter=0}),e.next=24,a.setState({outcomeSoundArray:o});case 24:return e.next=26,(r=a.props).saveParagraph.apply(r,n);case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadBackgroundImage=a.loadBackgroundImage.bind(Object(ae.a)(Object(ae.a)(a))),a.loadStartingSound=a.loadStartingSound.bind(Object(ae.a)(Object(ae.a)(a))),a.loadOutcomeSound=a.loadOutcomeSound.bind(Object(ae.a)(Object(ae.a)(a))),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"loadBackgroundImage",value:function(e){if(e.target.files[0].size>this.props.bytesLimitForUploads)window.alert("The file size cannot exceed ".concat(this.props.bytesLimitForUploads/1e6," MB."));else{var t="outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber);document.getElementById(t).src=URL.createObjectURL(e.target.files[0]),this.setState({backgroundImage:e.target.files[0],backgroundImageCounter:1})}}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.paragraphData.paragraphLinkRegister.length;t+=1)this.props.paragraphData.paragraphLinkRegister[t].depthNumberOfLinkedParagraph===this.props.depthNumber&&this.props.paragraphData.paragraphLinkRegister[t].paragraphNumberOfLinkedParagraph===this.props.paragraphNumber&&e.push(n.a.createElement("div",null,n.a.createElement("label",{style:{fontWeight:"500",fontSize:"0.8rem"}},"Following paragraph : ".concat(this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber)),n.a.createElement("div",null,n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block",marginBottom:0}},"Ending Sound")," ",n.a.createElement("input",{type:"file",accept:"audio/wav",name:"endingsound",id:"endingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length),style:{display:"none"},rankinnextparagraphs:e.length,onChange:this.loadOutcomeSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"endingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length),style:{cursor:"pointer",marginBottom:0}},"(Upload Sound)")),this.state.outcomeSoundArray[e.length]?n.a.createElement("audio",{controls:!0,src:this.state.outcomeSoundArray[e.length].outcomeSoundURL?this.state.outcomeSoundArray[e.length].outcomeSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingTop:"3px",paddingLeft:"5px"},id:"outcomeSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null)));return n.a.createElement("div",{className:"card-input"},n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block",marginBottom:0}},"Starting Sound")," ",n.a.createElement("input",{type:"file",accept:"audio/wav",name:"startingsound",id:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadStartingSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Sound)")),this.state.startingSound||this.props.startingSoundURL?n.a.createElement("audio",{controls:!0,src:this.props.startingSoundURL?this.props.startingSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingTop:"3px",paddingLeft:"5px"},id:"startingSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null),n.a.createElement("div",{className:"card-image",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block"}},"Background Image")," ",n.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadBackgroundImage}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Image)"))),n.a.createElement("div",{style:{width:"324px",height:"210px",position:"relative"}},n.a.createElement("img",{src:this.props.backgroundImageURL?this.props.backgroundImageURL:oe.a,className:"card-img-top",alt:"Background by default",style:{width:"100%",height:"100%",zIndex:1},id:"outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)}))),n.a.createElement("div",{className:"card-body",style:{paddingLeft:"10px",paddingRight:"10px",paddingTop:"2px",paddingBottom:"5px"}},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group",style:{marginBottom:0}},n.a.createElement("label",{htmlFor:"Text",style:{fontWeight:"500",fontSize:"0.8rem",marginBottom:"5px"}},"Text"),n.a.createElement("textarea",{type:"text",className:"form-control",name:"narrationInputText",maxLength:"750",placeholder:"Write your narration here...",rows:"4",required:!0,onChange:this.onChange,value:this.state.narrationInputText,style:{fontSize:"0.7rem",resize:"none"}}),0===this.props.depthNumber?null:n.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"10px"}},this.props.isVictory||this.props.hasLinkToNextParagraph?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Sudden Death"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isSuddenDeath,name:"suddendeath",onChange:this.setToSuddenDeath})),this.props.isSuddenDeath||this.props.hasLinkToNextParagraph?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Victory"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isVictory,name:"victory",onChange:this.setToVictory}))),e))),n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("input",{type:"submit",value:"Save Paragraph",className:"btn btn-dark paragraph-save",style:{display:"inline-block",width:"50%"},onClick:this.saveParagraph}),n.a.createElement("input",{type:"submit",value:"Delete Paragraph",paragraphnumber:this.props.paragraphNumber,className:"btn btn-dark paragraph-delete",style:{display:"inline-block",width:"50%"},onClick:this.deleteParagraph})))}}]),t}(r.Component),pe=Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData}})(ie),ce=a(423),ue=a.n(ce),le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dialogueInputText:"",backgroundImageCounter:0,startingSoundCounter:0,outcomeSoundArray:[],nextParagraphs:[]},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t,r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.props.QuestUnderEdition){e.next=10;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=10;break}return t=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({dialogueInputText:t.inputText});case 5:if(!t.nextParagraphs.some(function(e){return void 0!==e.outcomeSoundURL})){e.next=10;break}return r=[],t.nextParagraphs.forEach(function(e,t){void 0!==e.outcomeSoundURL&&(r[t]={outcomeSoundCounter:0,rankInNextParagraphs:t,outcomeSoundURL:e.outcomeSoundURL})}),e.next=10,a.setState({outcomeSoundArray:r});case 10:if(!a.props.nextParagraphs){e.next=13;break}return e.next=13,a.setState({nextParagraphs:a.props.nextParagraphs});case 13:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.id===t.id){e.next=5;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=5;break}return r=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({dialogueInputText:r.inputText});case 5:if(a.props.nextParagraphs===t.nextParagraphs){e.next=8;break}return e.next=8,a.setState({nextParagraphs:a.props.nextParagraphs});case 8:a.props.nextParagraphs.length<t.nextParagraphs.length&&(n=t.nextParagraphs.findIndex(function(e,r){return t.nextParagraphs[r]!==a.props.nextParagraphs[r]}),(s=a.state.outcomeSoundArray).splice(n,1),a.setState({outcomeSoundArray:s}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChangeInputText=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.onChangeOutcomeText=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(t.target.getAttribute("data-depnum"),10),n=parseInt(t.target.getAttribute("data-parnum"),10),s=Object(E.a)(a.state.nextParagraphs),(o=Object(y.a)({},s.find(function(e){return e.depthNumber===r&&e.paragraphNumber===n}))).outcomeText=t.target.value,i=s.findIndex(function(e){return e.depthNumber===r&&e.paragraphNumber===n}),s[i]=o,e.next=9,a.setState({nextParagraphs:s});case 9:return e.next=11,a.props.changeOutcomeText(r,n,o.outcomeText);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadStartingSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=9;break;case 5:return e.next=7,a.setState({startingSound:r,startingSoundCounter:1});case 7:document.getElementById("startingSoundControls ".concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber)).src=URL.createObjectURL(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadOutcomeSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=11;break;case 5:return n=a.state.outcomeSoundArray,s=parseInt(t.target.getAttribute("rankinnextparagraphs"),10),o=URL.createObjectURL(r),n[s]={outcomeSound:r,outcomeSoundCounter:1,rankInNextParagraphs:s,outcomeSoundURL:o},e.next=11,a.setState({outcomeSoundArray:n});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.deleteParagraph=function(e){a.props.deleteParagraph(e)},a.saveParagraph=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=[]).push(a.state.dialogueInputText),!a.state.backgroundImage||1!==a.state.backgroundImageCounter){e.next=9;break}return n.push(a.state.backgroundImage),e.next=7,a.setState({backgroundImageCounter:0});case 7:e.next=10;break;case 9:a.state.backgroundImage&&0===a.state.backgroundImageCounter?n.push("already uploaded"):n.push(null);case 10:if(!a.state.startingSound||1!==a.state.startingSoundCounter){e.next=16;break}return n.push(a.state.startingSound),e.next=14,a.setState({startingSoundCounter:0});case 14:e.next=17;break;case 16:a.state.startingSound&&0===a.state.startingSoundCounter?n.push("already uploaded"):n.push(null);case 17:return s=[],a.state.outcomeSoundArray.forEach(function(e){return s.push(Object(y.a)({},e))}),n.push(s),(o=a.state.outcomeSoundArray).map(function(e){return e.outcomeSoundCounter=0}),e.next=24,a.setState({outcomeSoundArray:o});case 24:return e.next=26,(r=a.props).saveParagraph.apply(r,n);case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadBackgroundImage=a.loadBackgroundImage.bind(Object(ae.a)(Object(ae.a)(a))),a.loadStartingSound=a.loadStartingSound.bind(Object(ae.a)(Object(ae.a)(a))),a.loadOutcomeSound=a.loadOutcomeSound.bind(Object(ae.a)(Object(ae.a)(a))),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"loadBackgroundImage",value:function(e){if(e.target.files[0].size>this.props.bytesLimitForUploads)window.alert("The file size cannot exceed ".concat(this.props.bytesLimitForUploads/1e6," MB."));else{var t="outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber);document.getElementById(t).src=URL.createObjectURL(e.target.files[0]),this.setState({backgroundImage:e.target.files[0],backgroundImageCounter:1})}}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.paragraphData.paragraphLinkRegister.length;t+=1)this.props.paragraphData.paragraphLinkRegister[t].depthNumberOfLinkedParagraph===this.props.depthNumber&&this.props.paragraphData.paragraphLinkRegister[t].paragraphNumberOfLinkedParagraph===this.props.paragraphNumber&&e.push(n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("label",{style:{fontWeight:"400",fontSize:"0.6rem",lineHeight:"0.8rem",paddingLeft:"5px",display:"inline-block",verticalAlign:"top"}},"Answer leading to ".concat(this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber)),n.a.createElement("div",null,n.a.createElement("div",{style:{display:"inline-block",width:"60%",verticalAlign:"top"}},n.a.createElement("textarea",{type:"text",className:"form-control",name:"paragraphOutcomeText".concat(this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber),maxLength:"150",placeholder:"Write your answer leading to ".concat(this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber,"..."),rows:"1",required:!0,onChange:this.onChangeOutcomeText,value:this.state.nextParagraphs[e.length]?this.state.nextParagraphs[e.length].outcomeText:"","data-depnum":this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"data-parnum":this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber,style:{fontSize:"0.6rem",resize:"none",width:"100%",top:0}})),n.a.createElement("div",{style:{display:"inline-block",overflowWrap:"break-word",width:"40%",verticalAlign:"top"}},n.a.createElement("input",{type:"file",accept:"audio/wav",name:"outcomesound",id:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(t+1),style:{display:"none"},onChange:this.loadOutcomeSound,rankinnextparagraphs:e.length}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block",paddingLeft:"5px",lineHeight:"0.8",verticalAlign:"top"}},n.a.createElement("label",{className:"label-upload",htmlFor:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(t+1),style:{cursor:"pointer",marginBottom:0,fontSize:"0.65rem",verticalAlign:"top"}},"(Upload Sound)")),this.state.outcomeSoundArray[e.length]?n.a.createElement("audio",{controls:!0,src:this.state.outcomeSoundArray[e.length].outcomeSoundURL?this.state.outcomeSoundArray[e.length].outcomeSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingBottom:"3px",paddingLeft:"5px"},id:"outcomeSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null))));return n.a.createElement("div",{className:"card-input"},n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block",marginBottom:0}},"Starting Sound")," ",n.a.createElement("input",{type:"file",accept:"audio/wav",name:"startingsound",id:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadStartingSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Sound)")),this.state.startingSound||this.props.startingSoundURL?n.a.createElement("audio",{controls:!0,src:this.props.startingSoundURL?this.props.startingSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingTop:"3px",paddingLeft:"5px"},id:"startingSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null),n.a.createElement("div",{className:"card-image",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block"}},"Background Image")," ",n.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadBackgroundImage}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Image)"))),n.a.createElement("div",{style:{width:"324px",height:"210px",position:"relative"}},n.a.createElement("img",{src:this.props.backgroundImageURL?this.props.backgroundImageURL:ue.a,className:"card-img-top",alt:"Background by default",style:{width:"100%",height:"100%"},id:"outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)}))),n.a.createElement("div",{className:"card-body",style:{paddingLeft:"10px",paddingRight:"10px",paddingTop:"2px",paddingBottom:"5px"}},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group",style:{marginBottom:0}},n.a.createElement("label",{htmlFor:"Text",style:{fontWeight:"500",fontSize:"0.8rem",marginBottom:"5px"}},"Text"),n.a.createElement("textarea",{type:"text",className:"form-control",name:"dialogueInputText",maxLength:"750",placeholder:"Write your dialogue line here...",rows:"4",required:!0,onChange:this.onChangeInputText,value:this.state.dialogueInputText,style:{fontSize:"0.7rem",resize:"none"}}))),n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,e))),n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("input",{type:"submit",value:"Save Paragraph",className:"btn btn-dark paragraph-save",style:{display:"inline-block",width:"50%"},onClick:this.saveParagraph}),n.a.createElement("input",{type:"submit",value:"Delete Paragraph",paragraphnumber:this.props.paragraphNumber,className:"btn btn-dark paragraph-delete",style:{display:"inline-block",width:"50%"},onClick:this.props.deleteParagraph})))}}]),t}(r.Component),he=Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData}})(le);var de=function(e){var t={};return e.keys().map(function(a,r){t[a.replace("./","")]=e(a)}),t}(a(899)),me=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={pointerArray:[{id:1,isSelected:!0},{id:2,isSelected:!1},{id:3,isSelected:!1},{id:4,isSelected:!1},{id:5,isSelected:!1},{id:6,isSelected:!1}]},a.selectPointer=function(e){var t=a.state.pointerArray;t.forEach(function(e){return e.isSelected=!1}),t[e.currentTarget.getAttribute("id")].isSelected=!t[e.currentTarget.getAttribute("id")].isSelected,a.setState({pointerArray:t}),a.props.selectPointer(a.props.rankinnextparagraphs,e.currentTarget.children[0].src)},a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=[],t=1;t<=Object.keys(de).length;t++)e.push(n.a.createElement("div",{className:"pointer-selection ".concat(this.state.pointerArray[t-1].isSelected?"selected":null),style:{display:"inline-block"},onClick:this.selectPointer,id:t-1},n.a.createElement("img",{src:de["".concat(t,".png")],className:"pointer-img",alt:"pointer",style:{height:"45px",width:"45px",display:"inline-block",verticalAlign:"top"}})));return n.a.createElement("div",null,e)}}]),t}(r.Component),ge=a(424),be=a.n(ge),fe=a(63),xe=a.n(fe),ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={pathInputText:"",selectedPointers:[],backgroundImageCounter:0,startingSoundCounter:0,outcomeSoundArray:[],nextParagraphs:[]},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t,r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.props.QuestUnderEdition){e.next=12;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=12;break}return t=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),r=[],t.nextParagraphs.forEach(function(e){e.selectedPointer?r.push(e.selectedPointer):r.push({image:xe.a,top:0,left:0})}),e.next=7,a.setState({pathInputText:t.inputText,selectedPointers:r});case 7:if(!t.nextParagraphs.some(function(e){return void 0!==e.outcomeSoundURL})){e.next=12;break}return n=[],t.nextParagraphs.forEach(function(e,t){void 0!==e.outcomeSoundURL&&(n[t]={outcomeSoundCounter:0,rankInNextParagraphs:t,outcomeSoundURL:e.outcomeSoundURL})}),e.next=12,a.setState({outcomeSoundArray:n});case 12:if(!a.props.nextParagraphs){e.next=15;break}return e.next=15,a.setState({nextParagraphs:a.props.nextParagraphs});case 15:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.id===t.id){e.next=7;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=7;break}return r=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),n=[],r.nextParagraphs.forEach(function(e){e.selectedPointer?n.push(e.selectedPointer):n.push({image:xe.a,top:0,left:0})}),e.next=7,a.setState({pathInputText:r.inputText,selectedPointers:n});case 7:if(!t||a.props.nextParagraphs.length===t.nextParagraphs.length||!0!==a.props.isPointAndClickPath){e.next=13;break}return s=Object(E.a)(a.state.selectedPointers),a.props.nextParagraphs.length>t.nextParagraphs.length&&s.push({image:xe.a,top:0,left:0}),a.props.nextParagraphs.length<t.nextParagraphs.length&&(o=a.props.nextParagraphs.findIndex(function(e,r){return t.nextParagraphs[r]!==a.props.nextParagraphs[r]}),s.splice(o,1)),e.next=13,a.setState({selectedPointers:s});case 13:if(!t||!0!==a.props.isPointAndClickPath||!1!==t.isPointAndClickPath){e.next=18;break}return i=Object(E.a)(a.state.selectedPointers),a.props.nextParagraphs.forEach(function(){i.push({image:xe.a,top:0,left:0})}),e.next=18,a.setState({selectedPointers:i});case 18:if(!t||!1!==a.props.isPointAndClickPath||!0!==t.isPointAndClickPath){e.next=21;break}return e.next=21,a.setState({selectedPointers:[]});case 21:if(a.props.nextParagraphs===t.nextParagraphs){e.next=25;break}return e.next=24,a.setState({nextParagraphs:a.props.nextParagraphs});case 24:a.props.nextParagraphs.length<t.nextParagraphs.length&&(p=t.nextParagraphs.findIndex(function(e,r){return t.nextParagraphs[r]!==a.props.nextParagraphs[r]}),(c=a.state.outcomeSoundArray).splice(p,1),a.setState({outcomeSoundArray:c}));case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChange=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.onChangeOutcomeText=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(t.target.getAttribute("data-depnum"),10),n=parseInt(t.target.getAttribute("data-parnum"),10),s=Object(E.a)(a.state.nextParagraphs),(o=Object(y.a)({},s.find(function(e){return e.depthNumber===r&&e.paragraphNumber===n}))).outcomeText=t.target.value,i=s.findIndex(function(e){return e.depthNumber===r&&e.paragraphNumber===n}),s[i]=o,e.next=9,a.setState({nextParagraphs:s});case 9:return e.next=11,a.props.changeOutcomeText(r,n,o.outcomeText);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadStartingSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=9;break;case 5:return e.next=7,a.setState({startingSound:r,startingSoundCounter:1});case 7:document.getElementById("startingSoundControls ".concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber)).src=URL.createObjectURL(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadOutcomeSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=11;break;case 5:return n=a.state.outcomeSoundArray,s=parseInt(t.target.getAttribute("rankinnextparagraphs"),10),o=URL.createObjectURL(r),n[s]={outcomeSound:r,outcomeSoundCounter:1,rankInNextParagraphs:s,outcomeSoundURL:o},e.next=11,a.setState({outcomeSoundArray:n});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToPointAndClickPath=function(){a.props.setToPointAndClickPath()},a.setToTextualPath=function(){a.props.setToTextualPath()},a.deleteParagraph=function(e){a.props.deleteParagraph(e)},a.saveParagraph=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=[]).push(a.state.pathInputText),!a.state.backgroundImage||1!==a.state.backgroundImageCounter){e.next=9;break}return n.push(a.state.backgroundImage),e.next=7,a.setState({backgroundImageCounter:0});case 7:e.next=10;break;case 9:a.state.backgroundImage&&0===a.state.backgroundImageCounter?n.push("already uploaded"):n.push(null);case 10:if(!a.state.startingSound||1!==a.state.startingSoundCounter){e.next=16;break}return n.push(a.state.startingSound),e.next=14,a.setState({startingSoundCounter:0});case 14:e.next=17;break;case 16:a.state.startingSound&&0===a.state.startingSoundCounter?n.push("already uploaded"):n.push(null);case 17:return s=[],a.state.outcomeSoundArray.forEach(function(e){return s.push(Object(y.a)({},e))}),n.push(s),(o=a.state.outcomeSoundArray).map(function(e){return e.outcomeSoundCounter=0}),e.next=24,a.setState({outcomeSoundArray:o});case 24:return e.next=26,(r=a.props).saveParagraph.apply(r,n);case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.selectPointer=function(){var e=Object(B.a)(U.a.mark(function e(t,r){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.state.selectedPointers)[t]={image:r,top:0,left:0},e.next=4,a.setState({selectedPointers:n});case 4:return e.next=6,a.props.selectPointer(n);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.drag_start=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target,n=window.getComputedStyle(t.target,null),s=parseInt(n.getPropertyValue("left"),10)-t.clientX+","+(parseInt(n.getPropertyValue("top"),10)-t.clientY),t.dataTransfer.setData("text/plain",s),a.setState({pointerInMovement:r,offset_data:s});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.drag_over=function(e){var t;try{t=e.dataTransfer.getData("text/plain").split(",")}catch(n){t=a.state.offset_data.split(",")}var r=a.state.pointerInMovement;return r.style.left=e.clientX+parseInt(t[0],10)+"px",r.style.top=e.clientY+parseInt(t[1],10)+"px",e.preventDefault(),!1},a.drop=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{r=t.dataTransfer.getData("text/plain").split(",")}catch(i){r=a.state.offset_data.split(",")}return n=a.state.pointerInMovement,t.clientX+parseInt(r[0],10)<0?n.style.left="0px":t.clientX+parseInt(r[0],10)>274?n.style.left="274px":n.style.left=t.clientX+parseInt(r[0],10)+"px",t.clientY+parseInt(r[1],10)<0?n.style.top="0px":t.clientY+parseInt(r[1],10)>160?n.style.top="160px":n.style.top=t.clientY+parseInt(r[1],10)+"px",t.preventDefault(),s=n.getAttribute("rankinnextparagraphs"),o=[],a.state.selectedPointers.forEach(function(e){return o.push(Object(y.a)({},e))}),o[s].left=parseInt(n.style.left,10),o[s].top=parseInt(n.style.top,10),e.next=12,a.setState({selectedPointers:o});case 12:return e.next=14,a.props.selectPointer(o);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadBackgroundImage=a.loadBackgroundImage.bind(Object(ae.a)(Object(ae.a)(a))),a.loadStartingSound=a.loadStartingSound.bind(Object(ae.a)(Object(ae.a)(a))),a.loadOutcomeSound=a.loadOutcomeSound.bind(Object(ae.a)(Object(ae.a)(a))),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"loadBackgroundImage",value:function(e){if(e.target.files[0].size>this.props.bytesLimitForUploads)window.alert("The file size cannot exceed ".concat(this.props.bytesLimitForUploads/1e6," MB."));else{var t="outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber);document.getElementById(t).src=URL.createObjectURL(e.target.files[0]),this.setState({backgroundImage:e.target.files[0],backgroundImageCounter:1})}}},{key:"render",value:function(){var e=[],t=[];switch(!0){case this.props.isTextualPath:for(var a=0;a<this.props.paragraphData.paragraphLinkRegister.length;a+=1)this.props.paragraphData.paragraphLinkRegister[a].depthNumberOfLinkedParagraph===this.props.depthNumber&&this.props.paragraphData.paragraphLinkRegister[a].paragraphNumberOfLinkedParagraph===this.props.paragraphNumber&&e.push(n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("label",{style:{fontWeight:"400",fontSize:"0.6rem",lineHeight:"0.8rem",paddingLeft:"5px",display:"inline-block",verticalAlign:"top"}},"Choice leading to ".concat(this.props.paragraphData.paragraphLinkRegister[a].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[a].paragraphNumber)),n.a.createElement("div",null,n.a.createElement("div",{style:{display:"inline-block",width:"60%",verticalAlign:"top"}},n.a.createElement("textarea",{type:"text",className:"form-control",name:"paragraphOutcomeText".concat(this.props.paragraphData.paragraphLinkRegister[a].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[a].paragraphNumber),maxLength:"150",placeholder:"Write your path choice to ".concat(this.props.paragraphData.paragraphLinkRegister[a].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[a].paragraphNumber,"..."),rows:"1",required:!0,onChange:this.onChangeOutcomeText,value:this.state.nextParagraphs[e.length]?this.state.nextParagraphs[e.length].outcomeText:"","data-depnum":this.props.paragraphData.paragraphLinkRegister[a].depthNumber,"data-parnum":this.props.paragraphData.paragraphLinkRegister[a].paragraphNumber,style:{fontSize:"0.6rem",resize:"none",width:"100%",top:0}})),n.a.createElement("div",{style:{display:"inline-block",overflowWrap:"break-word",width:"40%",verticalAlign:"top"}},n.a.createElement("input",{type:"file",accept:"audio/wav",name:"outcomesound",id:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(a+1),style:{display:"none"},rankinnextparagraphs:e.length,onChange:this.loadOutcomeSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block",paddingLeft:"5px",lineHeight:"0.8",verticalAlign:"top"}},n.a.createElement("label",{className:"label-upload",htmlFor:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(a+1),style:{cursor:"pointer",marginBottom:0,fontSize:"0.65rem",verticalAlign:"top"}},"(Upload Sound)")),this.state.outcomeSoundArray[e.length]?n.a.createElement("audio",{controls:!0,src:this.state.outcomeSoundArray[e.length].outcomeSoundURL?this.state.outcomeSoundArray[e.length].outcomeSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingBottom:"3px",paddingLeft:"5px"},id:"outcomeSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null))));break;case this.props.isPointAndClickPath:for(var r=0;r<this.props.paragraphData.paragraphLinkRegister.length;r+=1)this.props.paragraphData.paragraphLinkRegister[r].depthNumberOfLinkedParagraph===this.props.depthNumber&&this.props.paragraphData.paragraphLinkRegister[r].paragraphNumberOfLinkedParagraph===this.props.paragraphNumber&&(e.push(n.a.createElement("div",{style:{marginTop:"5px",position:"relative"}},n.a.createElement("li",{className:"dropdown"},n.a.createElement("a",{className:"dropdown-toggle",href:"#",id:"dropdown03","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{fontWeight:"500",fontSize:"0.8rem"}},"Pointer leading to ".concat(this.props.paragraphData.paragraphLinkRegister[r].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[r].paragraphNumber)),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdown03",style:{backgroundColor:"rgba(47, 48, 47, 0.966)",maxHeight:"150px",overflowY:"scroll",border:"2px solid black"},id:r},n.a.createElement(me,{rankinnextparagraphs:e.length,selectPointer:this.selectPointer}))),n.a.createElement("img",{src:this.state.selectedPointers[e.length]?this.state.selectedPointers[e.length].image:xe.a,className:"card-img-top",alt:"Answer by default",style:{maxHeight:"50px",maxWidth:"50px"},id:"answerIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(r+1)}),n.a.createElement("div",{style:{display:"inline-block",overflowWrap:"break-word",width:"40%",verticalAlign:"top",marginTop:"10px"}},n.a.createElement("input",{type:"file",accept:"audio/wav",name:"outcomesound",id:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(r+1),style:{display:"none"},rankinnextparagraphs:e.length,onChange:this.loadOutcomeSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block",paddingLeft:"5px",lineHeight:"0.8rem",verticalAlign:"top"}},n.a.createElement("label",{className:"label-upload",htmlFor:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(r+1),style:{cursor:"pointer",marginBottom:0,fontSize:"0.65rem",verticalAlign:"top"}},"(Upload Sound)")),this.state.outcomeSoundArray[e.length]?n.a.createElement("audio",{controls:!0,src:this.state.outcomeSoundArray[e.length].outcomeSoundURL?this.state.outcomeSoundArray[e.length].outcomeSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingBottom:"3px",paddingLeft:"5px"},id:"outcomeSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null))),t.push(n.a.createElement("img",{src:this.state.selectedPointers[e.length-1]?this.state.selectedPointers[e.length-1].image:xe.a,className:"card-img-top-pointer",alt:"Answer by default",draggable:"true",style:{maxHeight:"50px",maxWidth:"50px",position:"absolute",top:"".concat(this.state.selectedPointers[e.length-1]?this.state.selectedPointers[e.length-1].top:0,"px"),left:"".concat(this.state.selectedPointers[e.length-1]?this.state.selectedPointers[e.length-1].left:0,"px")},id:"draggableIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(r),onDragStart:this.drag_start,rankinnextparagraphs:e.length-1})));break;default:e=[]}return n.a.createElement("div",{className:"card-input"},n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block",marginBottom:0}},"Starting Sound")," ",n.a.createElement("input",{type:"file",accept:"audio/wav",name:"startingsound",id:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadStartingSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Sound)")),this.state.startingSound||this.props.startingSoundURL?n.a.createElement("audio",{controls:!0,src:this.props.startingSoundURL?this.props.startingSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingTop:"3px",paddingLeft:"5px"},id:"startingSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null),n.a.createElement("div",{className:"card-image",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block"}},"Background Image")," ",n.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadBackgroundImage}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Image)"))),n.a.createElement("div",{style:{width:"324px",height:"210px",position:"relative"},onDragOver:this.drag_over,onDrop:this.drop},n.a.createElement("img",{src:this.props.backgroundImageURL?this.props.backgroundImageURL:be.a,className:"card-img-top",alt:"Background by default",style:{width:"100%",height:"100%"},id:"outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)}),t)),n.a.createElement("div",{className:"card-body",style:{paddingLeft:"10px",paddingRight:"10px",paddingTop:"2px",paddingBottom:"5px"}},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group",style:{marginBottom:0}},n.a.createElement("label",{htmlFor:"Text",style:{fontWeight:"500",fontSize:"0.8rem",marginBottom:"5px"}},"Text"),n.a.createElement("textarea",{type:"text",className:"form-control",name:"pathInputText",maxLength:"750",placeholder:"Write your path choice description here...",rows:"4",required:!0,onChange:this.onChange,value:this.state.pathInputText,style:{fontSize:"0.7rem",resize:"none"}}),n.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"10px"}},this.props.isPointAndClickPath?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Textual"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isTextualPath,name:"textualpath",onChange:this.setToTextualPath})),this.props.isTextualPath?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Point & Click"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isPointAndClickPath,name:"pointandclickpath",onChange:this.setToPointAndClickPath}))))),n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,e))),n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("input",{type:"submit",value:"Save Paragraph",className:"btn btn-dark paragraph-save",style:{display:"inline-block",width:"50%"},onClick:this.saveParagraph}),n.a.createElement("input",{type:"submit",value:"Delete Paragraph",paragraphnumber:this.props.paragraphNumber,className:"btn btn-dark paragraph-delete",style:{display:"inline-block",width:"50%"},onClick:this.props.deleteParagraph})))}}]),t}(r.Component),ye=Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData}})(ve),ke=a(425),Ne=a.n(ke),Ee=a(426),Se=a.n(Ee),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={riddleInputText:"",backgroundImageCounter:0,startingSoundCounter:0,outcomeSoundArray:[],outcomeImageArray:[],nextParagraphs:[]},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t,r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.props.QuestUnderEdition){e.next=15;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=15;break}return t=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({riddleInputText:t.inputText});case 5:if(!t.nextParagraphs.some(function(e){return void 0!==e.outcomeSoundURL})){e.next=10;break}return r=[],t.nextParagraphs.forEach(function(e,t){void 0!==e.outcomeSoundURL&&(r[t]={outcomeSoundCounter:0,rankInNextParagraphs:t,outcomeSoundURL:e.outcomeSoundURL})}),e.next=10,a.setState({outcomeSoundArray:r});case 10:if(!t.nextParagraphs.some(function(e){return void 0!==e.outcomeImageURL})){e.next=15;break}return n=[],t.nextParagraphs.forEach(function(e,t){void 0!==e.outcomeImageURL&&(n[t]={outcomeImageCounter:0,rankInNextParagraphs:t,outcomeImageURL:e.outcomeImageURL})}),e.next=15,a.setState({outcomeImageArray:n});case 15:if(!a.props.nextParagraphs){e.next=18;break}return e.next=18,a.setState({nextParagraphs:a.props.nextParagraphs});case 18:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.id===t.id){e.next=5;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=5;break}return r=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({riddleInputText:r.inputText});case 5:if(a.props.nextParagraphs===t.nextParagraphs){e.next=8;break}return e.next=8,a.setState({nextParagraphs:a.props.nextParagraphs});case 8:a.props.nextParagraphs.length<t.nextParagraphs.length&&(n=t.nextParagraphs.findIndex(function(e,r){return t.nextParagraphs[r]!==a.props.nextParagraphs[r]}),(s=a.state.outcomeSoundArray).splice(n,1),a.setState({outcomeSoundArray:s}),(o=a.state.outcomeImageArray).splice(n,1),a.setState({outcomeImageArray:o}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChangeInputText=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.onChangeOutcomeText=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(t.target.getAttribute("data-depnum"),10),n=parseInt(t.target.getAttribute("data-parnum"),10),s=Object(E.a)(a.state.nextParagraphs),(o=Object(y.a)({},s.find(function(e){return e.depthNumber===r&&e.paragraphNumber===n}))).outcomeText=t.target.value,i=s.findIndex(function(e){return e.depthNumber===r&&e.paragraphNumber===n}),s[i]=o,e.next=9,a.setState({nextParagraphs:s});case 9:return e.next=11,a.props.changeOutcomeText(r,n,o.outcomeText);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadStartingSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=9;break;case 5:return e.next=7,a.setState({startingSound:r,startingSoundCounter:1});case 7:document.getElementById("startingSoundControls ".concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber)).src=URL.createObjectURL(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadOutcomeSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=11;break;case 5:return n=a.state.outcomeSoundArray,s=parseInt(t.target.getAttribute("rankinnextparagraphs"),10),o=URL.createObjectURL(r),n[s]={outcomeSound:r,outcomeSoundCounter:1,rankInNextParagraphs:s,outcomeSoundURL:o},e.next=11,a.setState({outcomeSoundArray:n});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToGraphicalRiddle=function(){a.props.setToGraphicalRiddle()},a.setToTextualRiddle=function(){a.props.setToTextualRiddle()},a.deleteParagraph=function(e){a.props.deleteParagraph(e)},a.saveParagraph=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=[]).push(a.state.riddleInputText),!a.state.backgroundImage||1!==a.state.backgroundImageCounter){e.next=9;break}return n.push(a.state.backgroundImage),e.next=7,a.setState({backgroundImageCounter:0});case 7:e.next=10;break;case 9:a.state.backgroundImage&&0===a.state.backgroundImageCounter?n.push("already uploaded"):n.push(null);case 10:if(!a.state.startingSound||1!==a.state.startingSoundCounter){e.next=16;break}return n.push(a.state.startingSound),e.next=14,a.setState({startingSoundCounter:0});case 14:e.next=17;break;case 16:a.state.startingSound&&0===a.state.startingSoundCounter?n.push("already uploaded"):n.push(null);case 17:return s=[],a.state.outcomeSoundArray.forEach(function(e){return s.push(Object(y.a)({},e))}),n.push(s),(o=a.state.outcomeSoundArray).map(function(e){return e.outcomeSoundCounter=0}),e.next=24,a.setState({outcomeSoundArray:o});case 24:return i=[],a.state.outcomeImageArray.forEach(function(e){return i.push(Object(y.a)({},e))}),n.push(i),(p=a.state.outcomeImageArray).map(function(e){return e.outcomeImageCounter=0}),e.next=31,a.setState({outcomeImageArray:p});case 31:return e.next=33,(r=a.props).saveParagraph.apply(r,n);case 33:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadBackgroundImage=a.loadBackgroundImage.bind(Object(ae.a)(Object(ae.a)(a))),a.loadStartingSound=a.loadStartingSound.bind(Object(ae.a)(Object(ae.a)(a))),a.loadOutcomeImage=a.loadOutcomeImage.bind(Object(ae.a)(Object(ae.a)(a))),a.loadOutcomeSound=a.loadOutcomeSound.bind(Object(ae.a)(Object(ae.a)(a))),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"loadBackgroundImage",value:function(e){if(e.target.files[0].size>this.props.bytesLimitForUploads)window.alert("The file size cannot exceed ".concat(this.props.bytesLimitForUploads/1e6," MB."));else{var t="outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber);document.getElementById(t).src=URL.createObjectURL(e.target.files[0]),this.setState({backgroundImage:e.target.files[0],backgroundImageCounter:1})}}},{key:"loadOutcomeImage",value:function(e){if(e.target.files[0].size>this.props.bytesLimitForUploads)window.alert("The file size cannot exceed ".concat(this.props.bytesLimitForUploads/1e6," MB."));else{var t=URL.createObjectURL(e.target.files[0]),a=this.state.outcomeImageArray,r=parseInt(e.target.getAttribute("rankinnextparagraphs"),10);a[r]={outcomeImage:e.target.files[0],outcomeImageCounter:1,rankInNextParagraphs:r,outcomeImageURL:t},this.setState({outcomeImageArray:a})}}},{key:"render",value:function(){var e=[];switch(!0){case this.props.isTextualRiddle:for(var t=0;t<this.props.paragraphData.paragraphLinkRegister.length;t+=1)this.props.paragraphData.paragraphLinkRegister[t].depthNumberOfLinkedParagraph===this.props.depthNumber&&this.props.paragraphData.paragraphLinkRegister[t].paragraphNumberOfLinkedParagraph===this.props.paragraphNumber&&e.push(n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("label",{style:{fontWeight:"400",fontSize:"0.6rem",lineHeight:"0.8rem",paddingLeft:"5px",display:"inline-block",verticalAlign:"top"}},"Answer leading to ".concat(this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber)),n.a.createElement("div",null,n.a.createElement("div",{style:{display:"inline-block",width:"60%",verticalAlign:"top"}},n.a.createElement("textarea",{type:"text",className:"form-control",name:"paragraphOutcomeText".concat(this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber),maxLength:"150",placeholder:"Write your answer leading to ".concat(this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber,"..."),rows:"1",required:!0,onChange:this.onChangeOutcomeText,value:this.state.nextParagraphs[e.length]?this.state.nextParagraphs[e.length].outcomeText:"","data-depnum":this.props.paragraphData.paragraphLinkRegister[t].depthNumber,"data-parnum":this.props.paragraphData.paragraphLinkRegister[t].paragraphNumber,style:{fontSize:"0.6rem",resize:"none",width:"100%",top:0}})),n.a.createElement("div",{style:{display:"inline-block",overflowWrap:"break-word",width:"40%",verticalAlign:"top"}},n.a.createElement("input",{type:"file",accept:"audio/wav",name:"outcomesound",id:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(t+1),style:{display:"none"},onChange:this.loadOutcomeSound,rankinnextparagraphs:e.length}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block",paddingLeft:"5px",lineHeight:"0.8",verticalAlign:"top"}},n.a.createElement("label",{className:"label-upload",htmlFor:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(t+1),style:{cursor:"pointer",marginBottom:0,fontSize:"0.65rem",verticalAlign:"top"}},"(Upload Sound)")),this.state.outcomeSoundArray[e.length]?n.a.createElement("audio",{controls:!0,src:this.state.outcomeSoundArray[e.length].outcomeSoundURL?this.state.outcomeSoundArray[e.length].outcomeSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingBottom:"3px",paddingLeft:"5px"},id:"outcomeSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null))));break;case this.props.isGraphicalRiddle:for(var a=0;a<this.props.paragraphData.paragraphLinkRegister.length;a+=1)this.props.paragraphData.paragraphLinkRegister[a].depthNumberOfLinkedParagraph===this.props.depthNumber&&this.props.paragraphData.paragraphLinkRegister[a].paragraphNumberOfLinkedParagraph===this.props.paragraphNumber&&e.push(n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("h4",{style:{fontWeight:"400",fontSize:"0.6rem",lineHeight:"0.8rem",paddingLeft:"5px",display:"inline-block",verticalAlign:"top",marginBottom:0}},"Answer leading to ".concat(this.props.paragraphData.paragraphLinkRegister[a].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[a].paragraphNumber)),n.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"answerimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(a+1),style:{display:"none"},onChange:this.loadOutcomeImage,rankinnextparagraphs:e.length})," ",n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"answerimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(a+1),style:{cursor:"pointer",marginBottom:0,fontSize:"0.6rem",verticalAlign:"top",lineHeight:"0.8rem"}},"(Upload Image)")),n.a.createElement("div",null,n.a.createElement("div",{style:{display:"inline-block",width:"60%",verticalAlign:"top"}},n.a.createElement("img",{src:this.state.outcomeImageArray[e.length]&&this.state.outcomeImageArray[e.length].outcomeImageURL?this.state.outcomeImageArray[e.length].outcomeImageURL:Se.a,className:"card-img-top",alt:"Answer by default",style:{width:"100%",maxHeight:"30px"},id:"answerIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(a+1)})),n.a.createElement("div",{style:{display:"inline-block",overflowWrap:"break-word",width:"40%",verticalAlign:"top"}},n.a.createElement("input",{type:"file",accept:"audio/wav",name:"outcomesound",id:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(a+1),style:{display:"none"},rankinnextparagraphs:e.length,onChange:this.loadOutcomeSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block",paddingLeft:"5px",lineHeight:"0.8rem",verticalAlign:"top"}},n.a.createElement("label",{className:"label-upload",htmlFor:"outcomesound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(a+1),style:{cursor:"pointer",marginBottom:0,fontSize:"0.65rem",verticalAlign:"top"}},"(Upload Sound)")),this.state.outcomeSoundArray[e.length]?n.a.createElement("audio",{controls:!0,src:this.state.outcomeSoundArray[e.length].outcomeSoundURL?this.state.outcomeSoundArray[e.length].outcomeSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingBottom:"3px",paddingLeft:"5px"},id:"outcomeSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber," - ").concat(e.length)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null))));break;default:e=[]}return n.a.createElement("div",{className:"card-input"},n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block",marginBottom:0}},"Starting Sound")," ",n.a.createElement("input",{type:"file",accept:"audio/wav",name:"startingsound",id:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadStartingSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Sound)")),this.state.startingSound||this.props.startingSoundURL?n.a.createElement("audio",{controls:!0,src:this.props.startingSoundURL?this.props.startingSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingTop:"3px",paddingLeft:"5px"},id:"startingSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null),n.a.createElement("div",{className:"card-image",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block"}},"Background Image")," ",n.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadBackgroundImage}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Image)"))),n.a.createElement("div",{style:{width:"324px",height:"210px",position:"relative"}},n.a.createElement("img",{src:this.props.backgroundImageURL?this.props.backgroundImageURL:Ne.a,className:"card-img-top",alt:"Background by default",style:{width:"100%",height:"100%"},id:"outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)}))),n.a.createElement("div",{className:"card-body",style:{paddingLeft:"10px",paddingRight:"10px",paddingTop:"2px",paddingBottom:"5px"}},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group",style:{marginBottom:0}},n.a.createElement("label",{htmlFor:"Text",style:{fontWeight:"500",fontSize:"0.8rem",marginBottom:"5px"}},"Text"),n.a.createElement("textarea",{type:"text",className:"form-control",name:"riddleInputText",maxLength:"750",placeholder:"Write your riddle description here...",rows:"4",required:!0,onChange:this.onChangeInputText,value:this.state.riddleInputText,style:{fontSize:"0.7rem",resize:"none"}}),n.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"10px"}},this.props.isGraphicalRiddle?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Textual"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isTextualRiddle,name:"textualriddle",onChange:this.setToTextualRiddle})),this.props.isTextualRiddle?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Graphical"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isGraphicalRiddle,name:"graphicalriddle",onChange:this.setToGraphicalRiddle}))))),n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,e))),n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("input",{type:"submit",value:"Save Paragraph",className:"btn btn-dark paragraph-save",style:{display:"inline-block",width:"50%"},onClick:this.saveParagraph}),n.a.createElement("input",{type:"submit",value:"Delete Paragraph",paragraphnumber:this.props.paragraphNumber,className:"btn btn-dark paragraph-delete",style:{display:"inline-block",width:"50%"},onClick:this.props.deleteParagraph})))}}]),t}(r.Component),Te=Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData}})(Pe);var Le=function(e){var t={};return e.keys().map(function(a,r){t[a.replace("./","")]=e(a)}),t}(a(905)),we=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={monsterArray:[{name:"Holoween",attackPoints:6,defensePoints:4,healthPoints:8,isSelected:!1},{name:"Nightlyskelly",attackPoints:8,defensePoints:7,healthPoints:7,isSelected:!1},{name:"Treep",attackPoints:7,defensePoints:9,healthPoints:8,isSelected:!1}]},a.selectMonster=function(e){a.state.monsterArray.forEach(function(e){return e.isSelected=!1});var t=a.state.monsterArray;t[e.currentTarget.getAttribute("id")].isSelected=!t[e.currentTarget.getAttribute("id")].isSelected,a.props.selectMonster(a.state.monsterArray[e.currentTarget.getAttribute("id")],e.currentTarget.children[0].src),a.setState({monsterArray:t})},a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=[],t=1;t<=Object.keys(Le).length;t++)e.push(n.a.createElement("div",{className:"monster-selection ".concat(this.state.monsterArray[t-1].isSelected?"selected":null),style:{display:"inline-block",width:"100%"},onClick:this.selectMonster,id:t-1},n.a.createElement("img",{src:Le["".concat(t,".png")],className:"mob-img",alt:"Mob",style:{height:"135px",width:"135px",display:"inline-block",verticalAlign:"top"}}),n.a.createElement("div",{style:{display:"inline-block"}},n.a.createElement("h5",{style:{fontSize:"0.8rem",marginBottom:0}},this.state.monsterArray[t-1].name),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Attack Points : ",this.state.monsterArray[t-1].attackPoints),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Defense Points : ",this.state.monsterArray[t-1].defensePoints),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Health Points : ",this.state.monsterArray[t-1].healthPoints))));return n.a.createElement("div",null,e)}}]),t}(r.Component);var Ae=function(e){var t={};return e.keys().map(function(a,r){t[a.replace("./","")]=e(a)}),t}(a(909)),Oe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={monsterArray:[{name:"Oger",attackPoints:10,defensePoints:8,healthPoints:14},{name:"Kongo",attackPoints:9,defensePoints:9,healthPoints:13},{name:"Zoidborg",attackPoints:7,defensePoints:11,healthPoints:12}]},a.selectMonster=function(e){a.state.monsterArray.forEach(function(e){return e.isSelected=!1});var t=a.state.monsterArray;t[e.currentTarget.getAttribute("id")].isSelected=!t[e.currentTarget.getAttribute("id")].isSelected,a.props.selectMonster(a.state.monsterArray[e.currentTarget.getAttribute("id")],e.currentTarget.children[0].src),a.setState({monsterArray:t})},a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=[],t=1;t<=Object.keys(Ae).length;t++)e.push(n.a.createElement("div",{className:"monster-selection ".concat(this.state.monsterArray[t-1].isSelected?"selected":null),style:{display:"inline-block",width:"100%"},onClick:this.selectMonster,id:t-1},n.a.createElement("img",{src:Ae["".concat(t,".png")],className:"mob-img",alt:"Mob",style:{height:"135px",width:"135px",display:"inline-block",verticalAlign:"top"}}),n.a.createElement("div",{style:{display:"inline-block"}},n.a.createElement("h5",{style:{fontSize:"0.8rem",marginBottom:0}},this.state.monsterArray[t-1].name),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Attack Points : ",this.state.monsterArray[t-1].attackPoints),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Defense Points : ",this.state.monsterArray[t-1].defensePoints),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Health Points : ",this.state.monsterArray[t-1].healthPoints))));return n.a.createElement("div",null,e)}}]),t}(r.Component);var Re=function(e){var t={};return e.keys().map(function(a,r){t[a.replace("./","")]=e(a)}),t}(a(913)),Ie=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={monsterArray:[{name:"Ragnarosito",attackPoints:15,defensePoints:12,healthPoints:20},{name:"The Beakster",attackPoints:18,defensePoints:10,healthPoints:16}]},a.selectMonster=function(e){a.state.monsterArray.forEach(function(e){return e.isSelected=!1});var t=a.state.monsterArray;t[e.currentTarget.getAttribute("id")].isSelected=!t[e.currentTarget.getAttribute("id")].isSelected,a.props.selectMonster(a.state.monsterArray[e.currentTarget.getAttribute("id")],e.currentTarget.children[0].src),a.setState({monsterArray:t})},a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=[],t=1;t<=Object.keys(Re).length;t++)e.push(n.a.createElement("div",{className:"monster-selection ".concat(this.state.monsterArray[t-1].isSelected?"selected":null),style:{display:"inline-block",width:"100%"},onClick:this.selectMonster,id:t-1},n.a.createElement("img",{src:Re["".concat(t,".png")],className:"mob-img",alt:"Mob",style:{height:"135px",width:"135px",display:"inline-block",verticalAlign:"top"}}),n.a.createElement("div",{style:{display:"inline-block"}},n.a.createElement("h5",{style:{fontSize:"0.8rem",marginBottom:0}},this.state.monsterArray[t-1].name),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Attack Points : ",this.state.monsterArray[t-1].attackPoints),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Defense Points : ",this.state.monsterArray[t-1].defensePoints),n.a.createElement("h5",{style:{fontSize:"0.6rem",fontStyle:"italic",marginBottom:0,marginLeft:"5px"}},"Health Points : ",this.state.monsterArray[t-1].healthPoints))));return n.a.createElement("div",null,e)}}]),t}(r.Component),De=a(427),Ce=a.n(De),je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selectedMonster:{},combatInputText:"",backgroundImageCounter:0},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.props.QuestUnderEdition){e.next=5;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=5;break}return t=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({combatInputText:t.inputText});case 5:if(a.state.selectedMonster===a.props.selectedMonster){e.next=8;break}return e.next=8,a.setState({selectedMonster:a.props.selectedMonster});case 8:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.id===t.id){e.next=5;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=5;break}return r=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({combatInputText:r.inputText});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onChangeInputText=function(e){a.setState(Object(H.a)({},e.target.name,e.target.value))},a.loadBackgroundImage=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files[0].size>a.props.bytesLimitForUploads)){e.next=4;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=9;break;case 4:return r="outputIMG ".concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber),document.getElementById(r).src=URL.createObjectURL(t.target.files[0]),e.next=9,a.setState({backgroundImage:t.target.files[0],backgroundImageCounter:1});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadStartingSound=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.target.files[0]).size>a.props.bytesLimitForUploads)){e.next=5;break}window.alert("The file size cannot exceed ".concat(a.props.bytesLimitForUploads/1e6," MB.")),e.next=9;break;case 5:return e.next=7,a.setState({startingSound:r,startingSoundCounter:1});case 7:document.getElementById("startingSoundControls ".concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber)).src=URL.createObjectURL(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToMobCombat=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.isMobCombat){e.next=3;break}return e.next=3,a.setState({selectedMonster:{}});case 3:return e.next=5,a.props.setToMobCombat();case 5:case"end":return e.stop()}},e)})),a.setToEliteMobCombat=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.isEliteMobCombat){e.next=3;break}return e.next=3,a.setState({selectedMonster:{}});case 3:return e.next=5,a.props.setToEliteMobCombat();case 5:case"end":return e.stop()}},e)})),a.setToFinalBossCombat=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.nextParagraphs.find(function(e){return a.props.paragraphData.paragraphRegister.find(function(e){return!0===e.paragraphSubTypes.isVictory})})){e.next=4;break}window.alert("This paragraph is linked to a Victory paragraph and must be of 'Final Boss' type. If you want to change the type of mob, you must first remove the link to the 'Victory' paragraph."),e.next=9;break;case 4:if(!a.props.isFinalBossCombat){e.next=7;break}return e.next=7,a.setState({selectedMonster:{}});case 7:return e.next=9,a.props.setToFinalBossCombat();case 9:case"end":return e.stop()}},e)})),a.deleteParagraph=function(e){a.props.deleteParagraph(e)},a.saveParagraph=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=[]).push(a.state.combatInputText),!a.state.backgroundImage||1!==a.state.backgroundImageCounter){e.next=9;break}return n.push(a.state.backgroundImage),e.next=7,a.setState({backgroundImageCounter:0});case 7:e.next=10;break;case 9:a.state.backgroundImage&&0===a.state.backgroundImageCounter?n.push("already uploaded"):n.push(null);case 10:if(!a.state.startingSound||1!==a.state.startingSoundCounter){e.next=16;break}return n.push(a.state.startingSound),e.next=14,a.setState({startingSoundCounter:0});case 14:e.next=17;break;case 16:a.state.startingSound&&0===a.state.startingSoundCounter?n.push("already uploaded"):n.push(null);case 17:return e.next=19,(r=a.props).saveParagraph.apply(r,n);case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.selectMonster=function(){var e=Object(B.a)(U.a.mark(function e(t,r){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(y.a)({},a.state.selectedMonster)).characteristics=t,n.image=r,n.left=0,n.top=0,e.next=7,a.setState({selectedMonster:n});case 7:return e.next=9,a.props.selectMonster(n);case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.drag_start=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target,n=window.getComputedStyle(t.target,null),s=parseInt(n.getPropertyValue("left"),10)-t.clientX+","+(parseInt(n.getPropertyValue("top"),10)-t.clientY),t.dataTransfer.setData("text/plain",s),a.setState({monsterInMovement:r,offset_data:s});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.drag_over=function(e){var t;try{t=e.dataTransfer.getData("text/plain").split(",")}catch(n){t=a.state.offset_data.split(",")}var r=a.state.monsterInMovement;return r.style.left=e.clientX+parseInt(t[0],10)+"px",r.style.top=e.clientY+parseInt(t[1],10)+"px",e.preventDefault(),!1},a.drop=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{r=t.dataTransfer.getData("text/plain").split(",")}catch(o){r=a.state.offset_data.split(",")}return n=a.state.monsterInMovement,t.clientX+parseInt(r[0],10)<0?n.style.left="0px":t.clientX+parseInt(r[0],10)>189?n.style.left="189px":n.style.left=t.clientX+parseInt(r[0],10)+"px",t.clientY+parseInt(r[1],10)<0?n.style.top="0px":t.clientY+parseInt(r[1],10)>75?n.style.top="75px":n.style.top=t.clientY+parseInt(r[1],10)+"px",t.preventDefault(),(s=Object(y.a)({},a.state.selectedMonster)).left=parseInt(n.style.left,10),s.top=parseInt(n.style.top,10),e.next=10,a.setState({selectedMonster:s});case 10:return e.next=12,a.props.selectMonster(s);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadBackgroundImage=a.loadBackgroundImage.bind(Object(ae.a)(Object(ae.a)(a))),a.loadStartingSound=a.loadStartingSound.bind(Object(ae.a)(Object(ae.a)(a))),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=[];switch(!0){case this.props.isMobCombat:e.push(n.a.createElement(we,{selectMonster:this.selectMonster}));break;case this.props.isEliteMobCombat:e.push(n.a.createElement(Oe,{selectMonster:this.selectMonster}));break;case this.props.isFinalBossCombat:e.push(n.a.createElement(Ie,{selectMonster:this.selectMonster}));break;default:e=[]}for(var t=[],a=0;a<this.props.paragraphData.paragraphLinkRegister.length;a+=1)this.props.paragraphData.paragraphLinkRegister[a].depthNumberOfLinkedParagraph===this.props.depthNumber&&this.props.paragraphData.paragraphLinkRegister[a].paragraphNumberOfLinkedParagraph===this.props.paragraphNumber&&t.push(n.a.createElement("div",null,n.a.createElement("label",{style:{fontWeight:"500",fontSize:"0.8rem"}},"Following paragraph : ".concat(this.props.paragraphData.paragraphLinkRegister[a].depthNumber,"-").concat(this.props.paragraphData.paragraphLinkRegister[a].paragraphNumber))));return n.a.createElement("div",{className:"card-input"},n.a.createElement("div",{style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block",marginBottom:0}},"Starting Sound")," ",n.a.createElement("input",{type:"file",accept:"audio/wav",name:"startingsound",id:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadStartingSound}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"startingsound ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Sound)")),this.state.startingSound||this.props.startingSoundURL?n.a.createElement("audio",{controls:!0,src:this.props.startingSoundURL?this.props.startingSoundURL:null,style:{display:"inline-block",width:"140px",height:"15px",paddingTop:"3px",paddingLeft:"5px"},id:"startingSoundControls ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)},"Your browser does not support the",n.a.createElement("code",null,"audio")," element."):null),n.a.createElement("div",{className:"card-image",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",null,n.a.createElement("h4",{style:{fontSize:"0.8rem",display:"inline-block"}},"Background Image")," ",n.a.createElement("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{display:"none"},onChange:this.loadBackgroundImage}),n.a.createElement("p",{style:{marginBottom:0,display:"inline-block"}},n.a.createElement("label",{className:"label-upload",htmlFor:"BGimage ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber),style:{cursor:"pointer",marginBottom:0}},"(Upload Image)"))),n.a.createElement("div",{style:{width:"324px",height:"210px",position:"relative"},onDragOver:this.drag_over,onDrop:this.drop},n.a.createElement("img",{src:this.props.backgroundImageURL?this.props.backgroundImageURL:Ce.a,className:"card-img-top",alt:"Background by default",style:{width:"100%",height:"100%"},id:"outputIMG ".concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber)}),n.a.createElement("img",{src:this.state.selectedMonster.image,className:"card-img-top-monster ".concat(this.state.selectedMonster.image?null:"hide"),draggable:"true",alt:"monster",style:{height:"135px",width:"135px",top:"".concat(this.state.selectedMonster?this.state.selectedMonster.top:0,"px"),left:"".concat(this.state.selectedMonster?this.state.selectedMonster.left:0,"px")},onDragStart:this.drag_start}))),n.a.createElement("div",{className:"card-body",style:{paddingLeft:"10px",paddingRight:"10px",paddingTop:"2px",paddingBottom:"5px"}},n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group",style:{marginBottom:0}},n.a.createElement("label",{htmlFor:"Text",style:{fontWeight:"500",fontSize:"0.8rem",marginBottom:"5px"}},"Text"),n.a.createElement("textarea",{type:"text",className:"form-control",name:"combatInputText",maxLength:"750",placeholder:"Write your combat introduction text here...",rows:"4",required:!0,onChange:this.onChangeInputText,value:this.state.combatInputText,style:{fontSize:"0.7rem",resize:"none"}}),n.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"10px",marginBottom:"5px"}},this.props.isEliteMobCombat||this.props.isFinalBossCombat?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Mob"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isMobCombat,name:"mobcombat",onChange:this.setToMobCombat})),this.props.isMobCombat||this.props.isFinalBossCombat?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Elite Mob"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isEliteMobCombat,name:"elitemobcombat",onChange:this.setToEliteMobCombat})),this.props.isMobCombat||this.props.isEliteMobCombat?null:n.a.createElement("div",null,n.a.createElement("label",{style:{marginBottom:0}},"Final Boss"),"   ",n.a.createElement("input",{type:"checkbox",checked:this.props.isFinalBossCombat,name:"finalbosscombat",onChange:this.setToFinalBossCombat}))),this.props.isMobCombat||this.props.isEliteMobCombat||this.props.isFinalBossCombat?n.a.createElement("li",{className:"dropdown",style:{marginBottom:"5px"}},n.a.createElement("a",{className:"dropdown-toggle",href:"#",id:"dropdown03","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{fontWeight:"500",fontSize:"0.8rem"}},"Monster Selection"),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdown03",style:{backgroundColor:"rgba(47, 48, 47, 0.966)",maxHeight:"150px",overflowY:"scroll",border:"2px solid black"}},e)):null,t))),n.a.createElement("div",{style:{marginTop:"5px"}},n.a.createElement("input",{type:"submit",value:"Save Paragraph",className:"btn btn-dark paragraph-save",style:{display:"inline-block",width:"50%"},onClick:this.saveParagraph}),n.a.createElement("input",{type:"submit",value:"Delete Paragraph",paragraphnumber:this.props.paragraphNumber,className:"btn btn-dark paragraph-delete",style:{display:"inline-block",width:"50%"},onClick:this.props.deleteParagraph})))}}]),t}(r.Component),Ue=Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData}})(je),Be=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={isLinked:!1},a.componentDidMount=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.isLinked){e.next=3;break}return e.next=3,a.setState({isLinked:!0});case 3:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLinked===a.props.isLinked){e.next=3;break}return e.next=3,a.setState({isLinked:a.props.isLinked});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.toggleParagraphLink=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.parentNode,e.next=3,a.setState({isLinked:!a.state.isLinked});case 3:return e.next=5,a.props.toggleParagraphLink(r,a.props.depthNumberOfLinkedParagraph,a.props.paragraphNumberOfLinkedParagraph,a.state.isLinked);case 5:if("unlink"!==e.sent){e.next=9;break}return e.next=9,a.setState({isLinked:!a.state.isLinked});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("h5",{className:"paragraph-link ".concat(this.props.display," ").concat(this.state.isLinked?"linked":""),onClick:this.toggleParagraphLink},0===this.props.paragraphData.paragraphRegister[this.props.rank].depthNumber?"START":"Paragraph ".concat(this.props.paragraphData.paragraphRegister[this.props.rank].depthNumber," - ").concat(this.props.paragraphData.paragraphRegister[this.props.rank].paragraphNumber))}}]),t}(r.Component),Fe=Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData}})(Be),Me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isSaving:!1,paragraphType:"narration",paragraphSubTypes:{isSuddenDeath:!1,isVictory:!1,isTextualRiddle:!1,isGraphicalRiddle:!1,isPointAndClickPath:!1,isTextualPath:!1,isMobCombat:!1,isEliteMobCombat:!1,isFinalBossCombat:!1},hasLinkToPreviousParagraph:!1,hasLinkToNextParagraph:!1,nextParagraphs:[],previousParagraphs:[],selectedMonster:{},backgroundImageURL:"",startingSoundURL:""},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.QuestUnderEdition){e.next=5;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=5;break}return t=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({paragraphType:t.paragraphType,paragraphSubTypes:t.paragraphSubTypes,hasLinkToPreviousParagraph:t.hasLinkToPreviousParagraph,hasLinkToNextParagraph:t.hasLinkToNextParagraph,nextParagraphs:t.nextParagraphs,previousParagraphs:t.previousParagraphs,selectedMonster:t.selectedMonster,backgroundImageURL:t.backgroundImageURL,startingSoundURL:t.startingSoundURL});case 5:if(0!==a.props.depthNumber){e.next=8;break}return e.next=8,a.setState({hasLinkToPreviousParagraph:!0});case 8:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.id===t.id||!a.props.QuestUnderEdition){e.next=5;break}if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id})){e.next=5;break}return r=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.props.id}),e.next=5,a.setState({paragraphType:r.paragraphType,paragraphSubTypes:r.paragraphSubTypes,hasLinkToPreviousParagraph:r.hasLinkToPreviousParagraph,hasLinkToNextParagraph:r.hasLinkToNextParagraph,nextParagraphs:r.nextParagraphs,previousParagraphs:r.previousParagraphs,selectedMonster:r.selectedMonster,backgroundImageURL:r.backgroundImageURL,startingSoundURL:r.startingSoundURL});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.deleteParagraph=function(e){0===a.props.depthNumber?window.alert("You cannot delete the starting paragraph."):a.state.hasLinkToNextParagraph||a.state.hasLinkToPreviousParagraph?window.alert("You cannot delete a paragraph that has links to previous or next paragraphs. You must remove these links first."):a.state.isSaving?window.alert("You cannot delete a paragraph while it is saving."):a.props.deleteParagraph(e,a.props.id)},a.saveParagraph=Object(B.a)(U.a.mark(function e(){var t,r,n,s,o,i,p,c,u,l,h,d,m,g,b,f,x,v,k,N,S,P,T,L,w,A,O,R,I,D,C,j,F,M,Q,z,G,H,V,q,K,W,X,_,Y,J,Z,$,ee,te,re,ne,se,oe,ie,pe,ce,ue,le,he,de,me,ge=arguments;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ge.length>0&&void 0!==ge[0]?ge[0]:null,r=ge.length>1&&void 0!==ge[1]?ge[1]:null,n=ge.length>2&&void 0!==ge[2]?ge[2]:null,s=ge.length>3&&void 0!==ge[3]?ge[3]:null,o=ge.length>4&&void 0!==ge[4]?ge[4]:null,!a.state.isSaving){e.next=9;break}window.alert("You must wait for the current save to finish before you can save again."),e.next=194;break;case 9:return i=function(){var e=Object(B.a)(U.a.mark(function e(t){var a,r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=Object(B.a)(U.a.mark(function e(a){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.firebase.uploadFile("".concat(this.props.QuestUnderEdition.id,"/Paragraph ").concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber,"/Outcomes/Sounds"),a.outcomeSound,null,{name:"outcomeSound_".concat(a.rankInNextParagraphs).concat(a.outcomeSound.name.substring(a.outcomeSound.name.lastIndexOf(".")))});case 2:return r=e.sent,e.next=5,L.refFromURL("gs://".concat(r.uploadTaskSnapshot.metadata.bucket,"/").concat(r.uploadTaskSnapshot.metadata.fullPath));case 5:return n=e.sent,e.next=8,n.getDownloadURL();case 8:s=e.sent,P.nextParagraphs[t.indexOf(a)].outcomeSoundURL=s;case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},r=function(e){return a.apply(this,arguments)}.bind(this),n=t.map(r),e.next=6,Promise.all(n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(B.a)(U.a.mark(function e(t){var a,r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=Object(B.a)(U.a.mark(function e(a){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.firebase.uploadFile("".concat(this.props.QuestUnderEdition.id,"/Paragraph ").concat(this.props.depthNumber," - ").concat(this.props.paragraphNumber,"/Outcomes/Images"),a.outcomeImage,null,{name:"outcomeImage_".concat(a.rankInNextParagraphs).concat(a.outcomeImage.name.substring(a.outcomeImage.name.lastIndexOf(".")))});case 2:return r=e.sent,e.next=5,L.refFromURL("gs://".concat(r.uploadTaskSnapshot.metadata.bucket,"/").concat(r.uploadTaskSnapshot.metadata.fullPath));case 5:return n=e.sent,e.next=8,n.getDownloadURL();case 8:s=e.sent,P.nextParagraphs[t.indexOf(a)].outcomeImageURL=s;case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},r=function(e){return a.apply(this,arguments)}.bind(this),n=t.map(r),e.next=6,Promise.all(n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),e.next=13,a.setState({isSaving:!0});case 13:if(c=a.props,u=c.firestore,l=c.QuestUnderEdition,h=a.state,d=h.paragraphType,m=h.paragraphSubTypes,g=h.hasLinkToPreviousParagraph,b=h.hasLinkToNextParagraph,h.nextParagraphs,f=h.previousParagraphs,x=a.props,v=x.depthNumber,k=x.paragraphNumber,N=x.id,S=[],Object(E.a)(a.state.nextParagraphs).forEach(function(e){return S.push(Object(y.a)({},e))}),P={depthNumber:v,paragraphNumber:k,id:N,hasLinkToNextParagraph:b,hasLinkToPreviousParagraph:g,nextParagraphs:S,previousParagraphs:f,paragraphSubTypes:m,paragraphType:d},t&&(P.inputText=t),"combat"===a.state.paragraphType&&a.state.selectedMonster&&(P.selectedMonster=a.state.selectedMonster),a.state.backgroundImageURL&&(P.backgroundImageURL=a.state.backgroundImageURL),a.state.startingSoundURL&&(P.startingSoundURL=a.state.startingSoundURL),(T=l.Paragraphs.find(function(e){return e.id===N}))&&Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.update({collection:"QuestsInProgress",doc:l.id},{Paragraphs:u.FieldValue.arrayRemove(T)});case 2:case"end":return e.stop()}},e)}))(),L=a.props.firebase.storage(),w=L.ref(),A=w.child("".concat(a.props.QuestUnderEdition.id,"/Paragraph ").concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber)),!r||"already uploaded"===r){e.next=39;break}return e.next=31,a.props.firebase.uploadFile("".concat(a.props.QuestUnderEdition.id,"/Paragraph ").concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber),r,null,{name:"backgroundImage".concat(r.name.substring(r.name.lastIndexOf(".")))});case 31:return O=e.sent,e.next=34,L.refFromURL("gs://".concat(O.uploadTaskSnapshot.metadata.bucket,"/").concat(O.uploadTaskSnapshot.metadata.fullPath));case 34:return R=e.sent,e.next=37,R.getDownloadURL();case 37:I=e.sent,P.backgroundImageURL=I;case 39:if(!n||"already uploaded"===n){e.next=50;break}return e.next=42,a.props.firebase.uploadFile("".concat(a.props.QuestUnderEdition.id,"/Paragraph ").concat(a.props.depthNumber," - ").concat(a.props.paragraphNumber),n,null,{name:"startingSound".concat(n.name.substring(n.name.lastIndexOf(".")))});case 42:return D=e.sent,e.next=45,L.refFromURL("gs://".concat(D.uploadTaskSnapshot.metadata.bucket,"/").concat(D.uploadTaskSnapshot.metadata.fullPath));case 45:return C=e.sent,e.next=48,C.getDownloadURL();case 48:j=e.sent,P.startingSoundURL=j;case 50:return e.next=52,A.child("Outcomes").child("Sounds").listAll();case 52:if(F=e.sent,M=i.bind(Object(ae.a)(Object(ae.a)(a))),!(s&&0===s.length&&F.items.length>0)){e.next=83;break}Q=!0,z=!1,G=void 0,e.prev=58,H=F.items[Symbol.iterator]();case 60:if(Q=(V=H.next()).done){e.next=67;break}return q=V.value,e.next=64,q.delete();case 64:Q=!0,e.next=60;break;case 67:e.next=73;break;case 69:e.prev=69,e.t0=e.catch(58),z=!0,G=e.t0;case 73:e.prev=73,e.prev=74,Q||null==H.return||H.return();case 76:if(e.prev=76,!z){e.next=79;break}throw G;case 79:return e.finish(76);case 80:return e.finish(73);case 81:e.next=118;break;case 83:if(!(s&&s.length>0&&F.items.length>s.length)){e.next=114;break}K=!0,W=!1,X=void 0,e.prev=87,_=F.items[Symbol.iterator]();case 89:if(K=(Y=_.next()).done){e.next=96;break}return J=Y.value,e.next=93,J.delete();case 93:K=!0,e.next=89;break;case 96:e.next=102;break;case 98:e.prev=98,e.t1=e.catch(87),W=!0,X=e.t1;case 102:e.prev=102,e.prev=103,K||null==_.return||_.return();case 105:if(e.prev=105,!W){e.next=108;break}throw X;case 108:return e.finish(105);case 109:return e.finish(102);case 110:return e.next=112,M(s);case 112:e.next=118;break;case 114:if(!(s&&s.length>0&&s.some(function(e){return 1===e.outcomeSoundCounter}))){e.next=118;break}return Z=s.filter(function(e){return 1===e.outcomeSoundCounter}),e.next=118,M(Z);case 118:return e.next=120,A.child("Outcomes").child("Images").listAll();case 120:if($=e.sent,ee=p.bind(Object(ae.a)(Object(ae.a)(a))),!(o&&0===o.length&&$.items.length>0)){e.next=151;break}te=!0,re=!1,ne=void 0,e.prev=126,se=$.items[Symbol.iterator]();case 128:if(te=(oe=se.next()).done){e.next=135;break}return ie=oe.value,e.next=132,ie.delete();case 132:te=!0,e.next=128;break;case 135:e.next=141;break;case 137:e.prev=137,e.t2=e.catch(126),re=!0,ne=e.t2;case 141:e.prev=141,e.prev=142,te||null==se.return||se.return();case 144:if(e.prev=144,!re){e.next=147;break}throw ne;case 147:return e.finish(144);case 148:return e.finish(141);case 149:e.next=186;break;case 151:if(!(o&&o.length>0&&$.items.length>o.length)){e.next=182;break}pe=!0,ce=!1,ue=void 0,e.prev=155,le=$.items[Symbol.iterator]();case 157:if(pe=(he=le.next()).done){e.next=164;break}return de=he.value,e.next=161,de.delete();case 161:pe=!0,e.next=157;break;case 164:e.next=170;break;case 166:e.prev=166,e.t3=e.catch(155),ce=!0,ue=e.t3;case 170:e.prev=170,e.prev=171,pe||null==le.return||le.return();case 173:if(e.prev=173,!ce){e.next=176;break}throw ue;case 176:return e.finish(173);case 177:return e.finish(170);case 178:return e.next=180,ee(o);case 180:e.next=186;break;case 182:if(!(o&&o.length>0&&o.some(function(e){return 1===e.outcomeImageCounter}))){e.next=186;break}return me=o.filter(function(e){return 1===e.outcomeImageCounter}),e.next=186,ee(me);case 186:return e.next=188,u.update({collection:"QuestsInProgress",doc:l.id},{Paragraphs:u.FieldValue.arrayUnion(P),numDepthLevels:a.props.numDepthLevels.numDepthLevels,NbParagraphs:a.props.paragraphData.paragraphNumberTotal,paragraphRegister:a.props.paragraphData.paragraphRegister,paragraphLinkRegister:a.props.paragraphData.paragraphLinkRegister});case 188:return e.next=190,a.setState({isSaving:!1});case 190:if(1!==a.props.QuestUnderEdition.globalSaveCounter||a.props.paragraphData.isGlobalSaving){e.next=193;break}return e.next=193,a.props.firestore.update({collection:"QuestsInProgress",doc:a.props.QuestUnderEdition.id},{globalSaveCounter:0});case 193:a.props.paragraphData.isGlobalSaving||window.alert("Paragraph data has been saved !");case 194:case"end":return e.stop()}},e,null,[[58,69,73,81],[74,,76,80],[87,98,102,110],[103,,105,109],[126,137,141,149],[142,,144,148],[155,166,170,178],[171,,173,177]])})),a.changeParagraphType=function(e){for(var t=[],r=0;r<a.state.previousParagraphs.length;r++){var n;n=a.props.paragraphData.paragraphRegister.find(function(e){return a.state.previousParagraphs[r].depthNumber===e.depthNumber&&a.state.previousParagraphs[r].paragraphNumber===e.paragraphNumber}),t.push(n)}if("narration"!==e.currentTarget.id&&t.some(function(e){return!0===e.paragraphSubTypes.isFinalBossCombat}))window.alert("A Paragraph linked from a 'Final Boss' Paragraph can only be of 'Narration' type.");else if(!0===a.state.paragraphSubTypes.isFinalBossCombat&&a.state.nextParagraphs.find(function(e){return a.props.paragraphData.paragraphRegister.find(function(e){return!0===e.paragraphSubTypes.isVictory})}))window.alert("This paragraph is linked to a Victory paragraph and of 'Final Boss' type. If you want to change the paragraph type, you must first remove the link to the 'Victory' paragraph.");else if(("narration"===e.currentTarget.id||"combat"===e.currentTarget.id)&&a.state.nextParagraphs.length>1)window.alert("A paragraph of 'narration' or 'combat' type can only have one next paragraph. You must remove links to next paragraphs.");else if(e.currentTarget.id!==a.state.paragraphType&&window.confirm("Are you sure you want to change the Paragraph Type ? \n \n All content from the current Paragraph inputs will be deleted and CANNOT BE RECOVERED.")){for(var s=Object.keys(Object(y.a)({},a.state.paragraphSubTypes)),o={},i=0;i<s.length;i++)o[s[i]]=!1;a.setState({paragraphSubTypes:o});var p=[];Object(E.a)(a.state.nextParagraphs).forEach(function(e){return p.push(Object(y.a)({},e))}),p.map(function(e){delete e.outcomeText,delete e.outcomeSoundURL,delete e.outcomeImageURL}),a.setState({nextParagraphs:p}),a.state.selectedMonster!=={}&&a.setState({selectedMonster:{}});for(var c=e.currentTarget.parentElement.children,u=0;u<c.length;u++)c[u].className=c[u].className.replace(" active","");e.currentTarget.className+=" active",a.setState({paragraphType:e.currentTarget.id}),a.props.setParagraphTypeInRegister(a.props.depthNumber,a.props.paragraphNumber,e.currentTarget.id)}},a.changeOutcomeText=function(){var e=Object(B.a)(U.a.mark(function e(t,r,n){var s,o,i;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(s=Object(y.a)({},a.state.nextParagraphs.find(function(e){return e.depthNumber===t&&e.paragraphNumber===r}))).outcomeText=n,o=Object(E.a)(a.state.nextParagraphs),i=o.findIndex(function(e){return e.depthNumber===t&&e.paragraphNumber===r}),o[i]=s,e.next=7,a.setState({nextParagraphs:o});case 7:case"end":return e.stop()}},e)}));return function(t,a,r){return e.apply(this,arguments)}}(),a.selectPointer=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a.state.nextParagraphs.forEach(function(e){return r.push(Object(y.a)({},e))}),r.map(function(e,a){e.selectedPointer=t[a]}),e.next=5,a.setState({nextParagraphs:r});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.selectMonster=function(){var e=Object(B.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({selectedMonster:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToSuddenDeath=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.setToSuddenDeathInRegister(a.props.depthNumber,a.props.paragraphNumber);case 2:return(r=Object(y.a)({},a.state.paragraphSubTypes)).isSuddenDeath=!r.isSuddenDeath,e.next=6,a.setState({paragraphSubTypes:r});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToVictory=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],n=0;n<a.state.previousParagraphs.length;n++)void 0,s=a.props.paragraphData.paragraphRegister.find(function(e){return a.state.previousParagraphs[n].depthNumber===e.depthNumber&&a.state.previousParagraphs[n].paragraphNumber===e.paragraphNumber}),r.push(s);if(0!==r.length&&r.every(function(e){return!0===e.paragraphSubTypes.isFinalBossCombat})){e.next=7;break}window.alert("A 'victory' paragraph can only be linked from a 'final boss' paragraph."),t.checked=!1,e.next=13;break;case 7:return e.next=9,a.props.setToVictoryInRegister(a.props.depthNumber,a.props.paragraphNumber);case 9:return(o=Object(y.a)({},a.state.paragraphSubTypes)).isVictory=!o.isVictory,e.next=13,a.setState({paragraphSubTypes:o});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToTextualRiddle=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Object(y.a)({},a.state.paragraphSubTypes)).isTextualRiddle=!r.isTextualRiddle,r.isTextualRiddle){e.next=7;break}return n=(n=a.state.nextParagraphs).map(function(e){return Object(y.a)({},e).outcomeText=""}),e.next=7,a.setState({nextParagraphs:n});case 7:return e.next=9,a.setState({paragraphSubTypes:r});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToGraphicalRiddle=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object(y.a)({},a.state.paragraphSubTypes)).isGraphicalRiddle=!r.isGraphicalRiddle,e.next=4,a.setState({paragraphSubTypes:r});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToTextualPath=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Object(y.a)({},a.state.paragraphSubTypes)).isTextualPath=!r.isTextualPath,r.isTextualPath){e.next=7;break}return n=(n=a.state.nextParagraphs).map(function(e){return Object(y.a)({},e).outcomeText=""}),e.next=7,a.setState({nextParagraphs:n});case 7:return e.next=9,a.setState({paragraphSubTypes:r});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToPointAndClickPath=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object(y.a)({},a.state.paragraphSubTypes)).isPointAndClickPath=!r.isPointAndClickPath,e.next=4,a.setState({paragraphSubTypes:r});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToMobCombat=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Object(y.a)({},a.state.paragraphSubTypes)).isMobCombat){e.next=4;break}return e.next=4,a.setState({selectedMonster:{}});case 4:return r.isMobCombat=!r.isMobCombat,e.next=7,a.setState({paragraphSubTypes:r});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToEliteMobCombat=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Object(y.a)({},a.state.paragraphSubTypes)).isEliteMobCombat){e.next=4;break}return e.next=4,a.setState({selectedMonster:{}});case 4:return r.isEliteMobCombat=!r.isEliteMobCombat,e.next=7,a.setState({paragraphSubTypes:r});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setToFinalBossCombat=function(){var e=Object(B.a)(U.a.mark(function e(t){var r;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Object(y.a)({},a.state.paragraphSubTypes)).isFinalBossCombat){e.next=4;break}return e.next=4,a.setState({selectedMonster:{}});case 4:return r.isFinalBossCombat=!r.isFinalBossCombat,e.next=7,a.setState({paragraphSubTypes:r});case 7:return e.next=9,a.props.setToFinalBossInRegister(a.props.depthNumber,a.props.paragraphNumber);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.toggleParagraphLink=function(e,t,r,n){var s=a.props.paragraphData.paragraphRegister.find(function(e){return e.depthNumber===t&&e.paragraphNumber===r});switch(!0){case n&&s.paragraphSubTypes.isFinalBossCombat&&"narration"!==a.state.paragraphType:return alert("Only a Paragraph of 'Narration' Type can be linked from a Final Boss Paragraph."),"unlink";case a.state.paragraphSubTypes.isVictory&&!s.paragraphSubTypes.isFinalBossCombat:return alert("A Paragraph of 'Victory' Type can only be linked from a Final Boss Paragraph."),"unlink";case n:a.props.addParagraphLink(a.props.depthNumber,a.props.paragraphNumber,t,r),a.setState({hasLinkToPreviousParagraph:!0});break;case!n:a.props.removeParagraphLink(a.props.depthNumber,a.props.paragraphNumber,t,r);break;default:return}},a.paragraphRef=n.a.createRef(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=this,t=[],a=0;a<this.props.paragraphData.paragraphRegister.length;a+=1)this.props.paragraphData.paragraphRegister[a].depthNumber<this.props.depthNumber&&(this.props.paragraphData.paragraphRegister[a].paragraphSubTypes.isSuddenDeath||this.props.paragraphData.paragraphRegister[a].paragraphSubTypes.isVictory||("narration"===this.props.paragraphData.paragraphRegister[a].paragraphType||"combat"===this.props.paragraphData.paragraphRegister[a].paragraphType)&&this.props.paragraphData.paragraphRegister[a].hasLinkToNextParagraph&&!this.props.paragraphData.paragraphRegister[a].nextParagraphs.some(function(t){return t.depthNumber===e.props.depthNumber&&t.paragraphNumber===e.props.paragraphNumber}))?t.push(n.a.createElement(Fe,{rank:a,display:"hide",toggleParagraphLink:this.toggleParagraphLink,depthNumberOfLinkedParagraph:this.props.paragraphData.paragraphRegister[a].depthNumber,paragraphNumberOfLinkedParagraph:this.props.paragraphData.paragraphRegister[a].paragraphNumber,isLinked:!!this.state.previousParagraphs.find(function(t){return t.depthNumber===e.props.paragraphData.paragraphRegister[a].depthNumber&&t.paragraphNumber===e.props.paragraphData.paragraphRegister[a].paragraphNumber})})):this.props.paragraphData.paragraphRegister[a].depthNumber<this.props.depthNumber&&t.push(n.a.createElement(Fe,{rank:a,display:"show",toggleParagraphLink:this.toggleParagraphLink,depthNumberOfLinkedParagraph:this.props.paragraphData.paragraphRegister[a].depthNumber,paragraphNumberOfLinkedParagraph:this.props.paragraphData.paragraphRegister[a].paragraphNumber,isLinked:!!this.state.previousParagraphs.find(function(t){return t.depthNumber===e.props.paragraphData.paragraphRegister[a].depthNumber&&t.paragraphNumber===e.props.paragraphData.paragraphRegister[a].paragraphNumber})}));return n.a.createElement("div",{style:{margin:"0px auto",paddingRight:"20px",verticalAlign:"top",position:"relative"},className:this.state.isSaving?"isSaving":null},n.a.createElement("div",{className:"card paragraph ".concat(this.state.hasLinkToNextParagraph?"linked-to-next":null," ").concat(this.state.hasLinkToPreviousParagraph?"linked-to-previous":null," ").concat(this.state.paragraphSubTypes.isSuddenDeath?"suddendeath":null," ").concat(this.state.paragraphSubTypes.isVictory?"victory":null),ref:this.paragraphRef},this.state.isSaving?n.a.createElement(R,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}}):null,n.a.createElement("div",{className:"card-header"},n.a.createElement("button",{className:"paragraph-type ".concat(this.props.depthNumber," - ").concat(this.props.newParagraphNumber?this.props.newParagraphNumber:this.props.paragraphNumber," ").concat("narration"===this.state.paragraphType?"active":null),id:"narration",onClick:this.changeParagraphType},"Narration"),n.a.createElement("button",{className:"paragraph-type ".concat(this.props.depthNumber," - ").concat(this.props.newParagraphNumber?this.props.newParagraphNumber:this.props.paragraphNumber," ").concat("dialogue"===this.state.paragraphType?"active":null),id:"dialogue",onClick:this.changeParagraphType},"Dialogue"),n.a.createElement("button",{className:"paragraph-type ".concat(this.props.depthNumber," - ").concat(this.props.newParagraphNumber?this.props.newParagraphNumber:this.props.paragraphNumber," ").concat("path"===this.state.paragraphType?"active":null),id:"path",onClick:this.changeParagraphType},"Path"),n.a.createElement("button",{className:"paragraph-type ".concat(this.props.depthNumber," - ").concat(this.props.newParagraphNumber?this.props.newParagraphNumber:this.props.paragraphNumber," ").concat("riddle"===this.state.paragraphType?"active":null),id:"riddle",onClick:this.changeParagraphType},"Riddle"),n.a.createElement("button",{className:"paragraph-type ".concat(this.props.depthNumber," - ").concat(this.props.newParagraphNumber?this.props.newParagraphNumber:this.props.paragraphNumber," ").concat("combat"===this.state.paragraphType?"active":null),id:"combat",onClick:this.changeParagraphType},"Combat")),n.a.createElement("h3",{className:"card-title",style:{fontSize:"1rem",marginBottom:"5px",marginTop:"5px",textAlign:"center"}},0===this.props.depthNumber?"START":"\xa7 ".concat(this.props.depthNumber," - ").concat(this.props.newParagraphNumber?this.props.newParagraphNumber:this.props.paragraphNumber)),0===this.props.depthNumber?null:n.a.createElement("li",{className:"dropdown",style:{marginBottom:"5px"}},n.a.createElement("a",{className:"dropdown-toggle",href:"#",id:"dropdown03","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",style:{fontWeight:"500",fontSize:"0.8rem",paddingLeft:"10px"}},"Paragraph linked from"),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdown03",style:{backgroundColor:"rgba(47, 48, 47, 0.966)",maxHeight:"150px",overflowY:"scroll",border:"2px solid black"}},t)),"narration"===this.state.paragraphType?n.a.createElement(pe,{depthNumber:this.props.depthNumber,paragraphNumber:this.props.paragraphNumber,setToSuddenDeath:this.setToSuddenDeath,setToVictory:this.setToVictory,isVictory:this.state.paragraphSubTypes.isVictory,isSuddenDeath:this.state.paragraphSubTypes.isSuddenDeath,hasLinkToNextParagraph:this.state.hasLinkToNextParagraph,deleteParagraph:this.deleteParagraph,saveParagraph:this.saveParagraph,QuestUnderEdition:this.props.QuestUnderEdition?this.props.QuestUnderEdition:null,id:this.props.id,nextParagraphs:this.state.nextParagraphs,backgroundImageURL:this.state.backgroundImageURL?this.state.backgroundImageURL:null,startingSoundURL:this.state.startingSoundURL?this.state.startingSoundURL:null,bytesLimitForUploads:this.props.bytesLimitForUploads}):null,"dialogue"===this.state.paragraphType?n.a.createElement(he,{depthNumber:this.props.depthNumber,paragraphNumber:this.props.paragraphNumber,deleteParagraph:this.deleteParagraph,saveParagraph:this.saveParagraph,changeOutcomeText:this.changeOutcomeText,QuestUnderEdition:this.props.QuestUnderEdition?this.props.QuestUnderEdition:null,id:this.props.id,nextParagraphs:this.state.nextParagraphs,backgroundImageURL:this.state.backgroundImageURL?this.state.backgroundImageURL:null,startingSoundURL:this.state.startingSoundURL?this.state.startingSoundURL:null,bytesLimitForUploads:this.props.bytesLimitForUploads}):null,"path"===this.state.paragraphType?n.a.createElement(ye,{depthNumber:this.props.depthNumber,paragraphNumber:this.props.paragraphNumber,setToTextualPath:this.setToTextualPath,setToPointAndClickPath:this.setToPointAndClickPath,isTextualPath:this.state.paragraphSubTypes.isTextualPath,isPointAndClickPath:this.state.paragraphSubTypes.isPointAndClickPath,deleteParagraph:this.deleteParagraph,saveParagraph:this.saveParagraph,changeOutcomeText:this.changeOutcomeText,selectPointer:this.selectPointer,QuestUnderEdition:this.props.QuestUnderEdition?this.props.QuestUnderEdition:null,id:this.props.id,nextParagraphs:this.state.nextParagraphs,backgroundImageURL:this.state.backgroundImageURL?this.state.backgroundImageURL:null,startingSoundURL:this.state.startingSoundURL?this.state.startingSoundURL:null,bytesLimitForUploads:this.props.bytesLimitForUploads}):null,"riddle"===this.state.paragraphType?n.a.createElement(Te,{depthNumber:this.props.depthNumber,paragraphNumber:this.props.paragraphNumber,setToTextualRiddle:this.setToTextualRiddle,setToGraphicalRiddle:this.setToGraphicalRiddle,isTextualRiddle:this.state.paragraphSubTypes.isTextualRiddle,isGraphicalRiddle:this.state.paragraphSubTypes.isGraphicalRiddle,deleteParagraph:this.deleteParagraph,saveParagraph:this.saveParagraph,changeOutcomeText:this.changeOutcomeText,QuestUnderEdition:this.props.QuestUnderEdition?this.props.QuestUnderEdition:null,id:this.props.id,nextParagraphs:this.state.nextParagraphs,backgroundImageURL:this.state.backgroundImageURL?this.state.backgroundImageURL:null,startingSoundURL:this.state.startingSoundURL?this.state.startingSoundURL:null,bytesLimitForUploads:this.props.bytesLimitForUploads}):null,"combat"===this.state.paragraphType?n.a.createElement(Ue,{selectMonster:this.selectMonster,depthNumber:this.props.depthNumber,paragraphNumber:this.props.paragraphNumber,setToMobCombat:this.setToMobCombat,setToEliteMobCombat:this.setToEliteMobCombat,setToFinalBossCombat:this.setToFinalBossCombat,isMobCombat:this.state.paragraphSubTypes.isMobCombat,isEliteMobCombat:this.state.paragraphSubTypes.isEliteMobCombat,isFinalBossCombat:this.state.paragraphSubTypes.isFinalBossCombat,deleteParagraph:this.deleteParagraph,saveParagraph:this.saveParagraph,QuestUnderEdition:this.props.QuestUnderEdition?this.props.QuestUnderEdition:null,id:this.props.id,nextParagraphs:this.state.nextParagraphs,selectedMonster:this.state.selectedMonster,backgroundImageURL:this.state.backgroundImageURL?this.state.backgroundImageURL:null,startingSoundURL:this.state.startingSoundURL?this.state.startingSoundURL:null,bytesLimitForUploads:this.props.bytesLimitForUploads}):null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.paragraphData.paragraphRegister.find(function(t){return t.depthNumber===e.depthNumber&&t.paragraphNumber===e.paragraphNumber});if(a&&a.nextParagraphs&&a.nextParagraphs.length>t.nextParagraphs.length){var r=Object(E.a)(t.nextParagraphs);return r.push(a.nextParagraphs[a.nextParagraphs.length-1]),{nextParagraphs:r,hasLinkToNextParagraph:a.hasLinkToNextParagraph}}if(a&&a.nextParagraphs&&a.nextParagraphs.length<t.nextParagraphs.length){var n=t.nextParagraphs.findIndex(function(e){return a.nextParagraphs.find(function(t){return t.paragraphNumber!==e.paragraphNumber})}),s=Object(E.a)(t.nextParagraphs);return s.splice(n,1),{nextParagraphs:s,hasLinkToNextParagraph:a.hasLinkToNextParagraph}}return a&&a.previousParagraphs&&a.previousParagraphs.length>0?{previousParagraphs:a.previousParagraphs,hasLinkToPreviousParagraph:a.hasLinkToPreviousParagraph}:a&&0===a.previousParagraphs.length&&0!==e.depthNumber?{previousParagraphs:a.previousParagraphs,hasLinkToPreviousParagraph:!1}:null}}]),t}(r.Component),Qe=Object(g.c)(Object(x.firestoreConnect)(function(e){return[{collection:"QuestsInProgress",storeAs:"QuestUnderEdition",doc:e.questID}]}),Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData,QuestUnderEdition:e.firestore.ordered.QuestUnderEdition&&e.firestore.ordered.QuestUnderEdition[0]}},{addParagraphLink:function(e,t,a,r){return{type:"ADD_PARAGRAPH_LINK",paragraphLinkToAddInLinkRegister:{depthNumber:e,paragraphNumber:t,depthNumberOfLinkedParagraph:a,paragraphNumberOfLinkedParagraph:r}}},removeParagraphLink:function(e,t,a,r){return{type:"REMOVE_PARAGRAPH_LINK",paragraphLinkToRemoveInLinkRegister:{depthNumber:e,paragraphNumber:t,depthNumberOfLinkedParagraph:a,paragraphNumberOfLinkedParagraph:r}}},setToSuddenDeathInRegister:function(e,t){return{type:"SET_TO_SUDDEN_DEATH",paragraphToSetToSuddenDeathInRegister:{depthNumber:e,paragraphNumber:t}}},setToVictoryInRegister:function(e,t){return{type:"SET_TO_VICTORY",paragraphToSetToVictoryInRegister:{depthNumber:e,paragraphNumber:t}}},setParagraphTypeInRegister:function(e,t,a){return{type:"SET_PARAGRAPH_TYPE",paragraphType:a,paragraphToUpdateInRegisterWithType:{depthNumber:e,paragraphNumber:t}}},setParagraphLinkStatusInRegister:function(e,t,a,r){return{type:"SET_PARAGRAPH_LINK_STATUS",paragraphToUpdateInRegisterWithLinkStatus:{depthNumber:e,paragraphNumber:t},nextorprevious:a,status:r}},setToFinalBossInRegister:function(e,t){return{type:"SET_TO_FINALBOSS",paragraphToSetToFinalBossInRegister:{depthNumber:e,paragraphNumber:t}}}}))(Me),ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).onDeleteParagraph=function(){var e=Object(B.a)(U.a.mark(function e(t,r){var s,o,i,p,c,u,l,h,d,m,g,b;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=parseInt(t.target.getAttribute("paragraphnumber"),10),!(a.state.paragraphsInDepthLevel>1)){e.next=38;break}if(!window.confirm("Are you sure you want to delete this paragraph ? \n \n All content will be deleted and CANNOT BE RECOVERED.")){e.next=13;break}return e.next=5,a.props.decreaseParagraphFromTotal(a.props.depthNumber,s);case 5:return e.next=7,a.setState({paragraphsInDepthLevel:a.state.paragraphsInDepthLevel-1,paragraphsArray:a.state.paragraphsArray.filter(function(e,t){return t+1!==s})});case 7:return o=a.state.paragraphsArray.filter(function(e,t){return t>=s-1}),i=[],o.forEach(function(e){i.push(n.a.cloneElement(e,{paragraphNumber:e.props.paragraphNumber-1}))}),p=a.state.paragraphsArray.filter(function(e,t){return t<s-1}),e.next=13,a.setState({paragraphsArray:[].concat(Object(E.a)(p),i)});case 13:if(c=a.props.firestore,!(u=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===r}))){e.next=36;break}return e.next=18,c.update({collection:"QuestsInProgress",doc:a.props.QuestUnderEdition.id},{Paragraphs:c.FieldValue.arrayRemove(u),NbParagraphs:a.props.paragraphData.paragraphNumberTotal,paragraphRegister:a.props.paragraphData.paragraphRegister,paragraphLinkRegister:a.props.paragraphData.paragraphLinkRegister});case 18:return l=a.props.firebase.storage(),h=l.ref(),d=h.child("".concat(a.props.QuestUnderEdition.id,"/Paragraph ").concat(a.props.depthNumber," - ").concat(s)),e.next=23,d.listAll();case 23:if((m=e.sent).items.length>0&&m.items.forEach(function(e){return e.delete()}),!(m.prefixes.length>0)){e.next=36;break}return g=m.prefixes[0].child("Sounds"),e.next=29,g.listAll();case 29:return e.sent.items.forEach(function(e){return e.delete()}),b=m.prefixes[0].child("Images"),e.next=34,b.listAll();case 34:e.sent.items.forEach(function(e){return e.delete()});case 36:e.next=39;break;case 38:window.alert("You cannot delete this paragraph, because there must be at least one paragraph in each depth level.");case 39:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.state={paragraphsInDepthLevel:1,paragraphsArray:[n.a.createElement(Qe,{key:1,id:ne.a.v4(),paragraphNumber:1,depthNumber:a.props.depthNumber,deleteParagraph:a.onDeleteParagraph,questID:a.props.questID,numDepthLevels:a.props.numDepthLevels.numDepthLevels,bytesLimitForUploads:a.props.bytesLimitForUploads})],linkedParagraphs:0},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t,r,s,o,i,p;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.props.QuestUnderEdition){e.next=12;break}if(!((t=a.props.QuestUnderEdition.Paragraphs.filter(function(e){return e.depthNumber===a.props.depthNumber})).length>0)){e.next=12;break}for(r=t.filter(function(e){return!0===e.hasLinkToPreviousParagraph}),s=[],t.forEach(function(e){return s.push(e.paragraphNumber)}),o=s.reduce(function(e,t){return Math.max(e,t)}),i=[],p=1;p<=o;p++)i.push(n.a.createElement(Qe,{key:p-1,id:ne.a.v4(),paragraphNumber:p,depthNumber:a.props.depthNumber,deleteParagraph:a.onDeleteParagraph,questID:a.props.questID,numDepthLevels:a.props.numDepthLevels.numDepthLevels,bytesLimitForUploads:a.props.bytesLimitForUploads}));return t.forEach(function(e){i[e.paragraphNumber-1]=n.a.createElement(Qe,{key:e.paragraphNumber-1,id:e.id,paragraphNumber:e.paragraphNumber,depthNumber:e.depthNumber,deleteParagraph:a.onDeleteParagraph,questID:a.props.QuestUnderEdition.id,numDepthLevels:a.props.QuestUnderEdition.numDepthLevels,bytesLimitForUploads:a.props.bytesLimitForUploads})}),e.next=12,a.setState({paragraphsInDepthLevel:t.length,linkedParagraphs:r.length,paragraphsArray:i});case 12:case"end":return e.stop()}},e)})),a.onAddParagraph=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({paragraphsInDepthLevel:a.state.paragraphsInDepthLevel+1});case 2:return e.next=4,a.setState({paragraphsArray:[].concat(Object(E.a)(a.state.paragraphsArray),[n.a.createElement(Qe,{key:a.state.paragraphsInDepthLevel,paragraphNumber:a.state.paragraphsInDepthLevel,depthNumber:a.props.depthNumber,id:ne.a.v4(),deleteParagraph:a.onDeleteParagraph,questID:a.props.questID,numDepthLevels:a.props.numDepthLevels.numDepthLevels,bytesLimitForUploads:a.props.bytesLimitForUploads})])});case 4:return e.next=6,a.props.addParagraphToTotal(a.props.depthNumber,a.state.paragraphsInDepthLevel);case 6:a.el.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});case 7:case"end":return e.stop()}},e)})),a.onDeleteDepthLevel=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c,u,l;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.currentTarget.parentElement.parentElement.children[1].getElementsByClassName("linked-to-previous").length){e.next=5;break}window.alert("This depth level contains paragraphs that are linked to next or previous paragraphs. You must remove these links before you can delete these paragraphs and the depth level."),e.next=40;break;case 5:if(!window.confirm("Are you sure you want to delete this depth level ? \n \n All content from the paragraphs inside this depth level will be deleted and CANNOT BE RECOVERED.")){e.next=40;break}r=1;case 7:if(!(r<=a.state.paragraphsInDepthLevel)){e.next=36;break}return e.next=10,a.props.decreaseParagraphFromTotal(a.props.depthNumber,r);case 10:if(n=a.props.firestore,!(s=a.props.QuestUnderEdition.Paragraphs.find(function(e){return e.id===a.state.paragraphsArray[r-1].props.id}))){e.next=33;break}return e.next=15,n.update({collection:"QuestsInProgress",doc:a.props.QuestUnderEdition.id},{Paragraphs:n.FieldValue.arrayRemove(s)});case 15:return o=a.props.firebase.storage(),i=o.ref(),p=i.child("".concat(a.props.QuestUnderEdition.id,"/Paragraph ").concat(a.props.depthNumber," - ").concat(r)),e.next=20,p.listAll();case 20:if((c=e.sent).items.length>0&&c.items.forEach(function(e){return e.delete()}),!(c.prefixes.length>0)){e.next=33;break}return u=c.prefixes[0].child("Sounds"),e.next=26,u.listAll();case 26:return e.sent.items.forEach(function(e){return e.delete()}),l=c.prefixes[0].child("Images"),e.next=31,l.listAll();case 31:e.sent.items.forEach(function(e){return e.delete()});case 33:r+=1,e.next=7;break;case 36:return e.next=38,a.props.deleteDepthLevel();case 38:return e.next=40,a.props.firestore.update({collection:"QuestsInProgress",doc:a.props.QuestUnderEdition.id},{numDepthLevels:a.props.numDepthLevels.numDepthLevels});case 40:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"level-depth-separation",style:{textAlign:"center",marginTop:"10px"}},n.a.createElement("h5",{style:{display:"inline-block",marginBottom:"0.25rem"}},"Depth Level ",this.props.depthNumber),this.props.depthNumber===this.props.numDepthLevels.numDepthLevels-1?n.a.createElement("button",{style:{display:"inline-block",backgroundColor:"transparent",border:"none"},onClick:this.onDeleteDepthLevel},n.a.createElement("i",{className:"fas fa-trash-alt"})):null),n.a.createElement("div",{style:{alignItems:"center",display:"flex",overflowX:"auto"}},this.state.paragraphsArray,n.a.createElement("input",{type:"submit",value:"Add Paragraph",className:"btn btn-dark btn-block",style:{width:"auto",margin:"auto"},onClick:this.onAddParagraph,ref:function(t){e.el=t}})))}}]),t}(r.Component),Ge=Object(g.c)(Object(x.firestoreConnect)(function(e){return[{collection:"QuestsInProgress",storeAs:"QuestUnderEdition",doc:e.QuestUnderEdition.id}]}),Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,paragraphData:e.paragraphData}}))(ze),He=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={initialID:"",isLoading:!0,bytesLimitForUploads:5e6},a.onAddDepthLevel=Object(B.a)(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("targetscroll"),e.next=3,a.props.addDepthLevel(a.state.numDepthLevels);case 3:return e.next=5,a.props.addParagraphToTotal(a.props.numDepthLevels.numDepthLevels-1,1);case 5:a.scrollToTarget(t);case 6:case"end":return e.stop()}},e)})),a.onDeleteDepthLevel=function(e){a.props.decreaseDepthLevel(a.state.numDepthLevels)},a.componentDidMount=Object(B.a)(U.a.mark(function e(){var t,r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.props.QuestUnderEdition||a.props.QuestUnderEdition.id!==a.props.match.params.id){e.next=23;break}return e.next=3,a.setState({numDepthLevels:a.props.QuestUnderEdition.numDepthLevels});case 3:return t=[],a.props.QuestUnderEdition.paragraphRegister.forEach(function(e){return t.push(Object(y.a)({},e))}),r=[],a.props.QuestUnderEdition.paragraphLinkRegister.forEach(function(e){return r.push(Object(y.a)({},e))}),n=a.props.QuestUnderEdition.numDepthLevels,e.next=10,a.props.syncRegistersInRedux(t,r,n);case 10:if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return 0===e.depthNumber})){e.next=16;break}return s=a.props.QuestUnderEdition.Paragraphs.find(function(e){return 0===e.depthNumber}),e.next=14,a.setState({initialID:s.id});case 14:e.next=19;break;case 16:return o=ne.a.v4(),e.next=19,a.setState({initialID:o});case 19:return e.next=21,a.setState({isLoading:!1});case 21:e.next=25;break;case 23:return e.next=25,a.setState({isLoading:!0});case 25:case"end":return e.stop()}},e)})),a.componentDidUpdate=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.QuestUnderEdition===t.QuestUnderEdition||!(void 0===t.QuestUnderEdition||t.QuestUnderEdition.id&&t.QuestUnderEdition.id!==a.props.match.params.id)||a.props.QuestUnderEdition.id!==a.props.match.params.id){e.next=21;break}return e.next=3,a.setState({numDepthLevels:a.props.QuestUnderEdition.numDepthLevels});case 3:return r=[],a.props.QuestUnderEdition.paragraphRegister.forEach(function(e){return r.push(Object(y.a)({},e))}),n=[],a.props.QuestUnderEdition.paragraphLinkRegister.forEach(function(e){return n.push(Object(y.a)({},e))}),s=a.props.QuestUnderEdition.numDepthLevels,e.next=10,a.props.syncRegistersInRedux(r,n,s);case 10:if(!a.props.QuestUnderEdition.Paragraphs.find(function(e){return 0===e.depthNumber})){e.next=16;break}return o=a.props.QuestUnderEdition.Paragraphs.find(function(e){return 0===e.depthNumber}),e.next=14,a.setState({initialID:o.id});case 14:e.next=19;break;case 16:return i=ne.a.v4(),e.next=19,a.setState({initialID:i});case 19:return e.next=21,a.setState({isLoading:!1});case 21:if(a.props.numDepthLevels.numDepthLevels===t.numDepthLevels.numDepthLevels){e.next=24;break}return e.next=24,a.setState({numDepthLevels:a.props.numDepthLevels.numDepthLevels});case 24:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.componentWillUnmount=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.clearQuestData();case 1:case"end":return e.stop()}},e)})),a.onSaveUnderEdition=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.setToGlobalSaving();case 2:r=document.getElementsByClassName("paragraph-save"),Array.from(r).map(function(e){return e.click()}),n=function(){setTimeout(s,2e3)},s=function(){var e=Object(B.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==document.getElementsByClassName("isSaving").length){e.next=9;break}return e.next=4,a.props.firestore.update({collection:"QuestsInProgress",doc:a.props.QuestUnderEdition.id},{globalSaveCounter:1});case 4:return e.next=6,a.props.setToGlobalSaving();case 6:window.alert("Full save complete !"),e.next=10;break;case 9:n();case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),n.bind(Object(ae.a)(Object(ae.a)(a))),s.bind(Object(ae.a)(Object(ae.a)(a))),n();case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"scrollToTarget",value:function(e){e.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return n.a.createElement(R,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}});for(var t=[],a=this.props.QuestUnderEdition,r=1;r<this.state.numDepthLevels;r+=1)t.push(n.a.createElement(Ge,{key:r,depthNumber:r,addParagraphToTotal:this.props.addParagraphToTotal,decreaseParagraphFromTotal:this.props.decreaseParagraphFromTotal,deleteDepthLevel:this.onDeleteDepthLevel,numDepthLevels:this.state.numDepthLevels,QuestUnderEdition:this.props.QuestUnderEdition?this.props.QuestUnderEdition:null,bytesLimitForUploads:this.state.bytesLimitForUploads}));return n.a.createElement("div",{className:"quest-builder-container"},n.a.createElement(d.a,{message:"Are you sure you want to leave the page ? All unsaved changes will be lost."}),n.a.createElement("div",{style:{position:"relative"}},n.a.createElement("h2",{style:{position:"relative",margin:"auto",display:"inline-block",textAlign:"center",left:"50%",transform:"translateX(-50%)"}},"Quest Builder"),n.a.createElement("input",{type:"submit",value:"Global Save",className:"btn btn-dark btn-block",style:{width:"auto",float:"right",marginRight:"20px",display:"inline-block"},id:"savequest",onClick:this.onSaveUnderEdition}),n.a.createElement("hr",null),n.a.createElement("h3",{style:{textAlign:"center",fontStyle:"italic",display:"block"}},a.Title)),n.a.createElement("div",{className:"depth-levels-container",style:{marginTop:"10px"}},n.a.createElement("div",{className:"depth-level-0"},n.a.createElement("div",{className:"level-depth-separation",style:{textAlign:"center"}},n.a.createElement("h5",null,"Depth Level 0")),n.a.createElement(Qe,{key:1,id:this.state.initialID,depthNumber:0,paragraphNumber:1,bytesLimitForUploads:this.state.bytesLimitForUploads}),n.a.createElement("div",{className:"depth-level-additional",style:{marginTop:"10px"}},t),n.a.createElement("div",null,n.a.createElement("input",{type:"submit",value:"Add Another Depth Level",className:"btn btn-dark btn-block",onClick:function(t){return e.onAddDepthLevel(t)},style:{marginTop:"5px"},id:"targetscroll"})))))}}]),t}(r.Component),Ve=Object(g.c)(Object(x.firestoreConnect)(function(e){return[{collection:"QuestsInProgress",storeAs:"QuestUnderEdition",doc:e.match.params.id}]}),Object(m.connect)(function(e){return{numDepthLevels:e.numDepthLevels,paragraphNumberTotal:e.paragraphNumberTotal,QuestUnderEdition:e.firestore.ordered.QuestUnderEdition&&e.firestore.ordered.QuestUnderEdition[0]}},{addDepthLevel:function(e){return{type:"ADD_DEPTH_LEVEL",currentNumDepthLevels:e}},decreaseDepthLevel:function(e){return{type:"DECREASE_DEPTH_LEVEL",currentNumDepthLevels:e}},addParagraphToTotal:function(e,t){return{type:"ADD_PARAGRAPH_TO_TOTAL",paragraphToAddInRegister:{depthNumber:e,paragraphNumber:t,paragraphSubTypes:{isSuddenDeath:!1,isVictory:!1,isFinalBossCombat:!1},hasLinkToNextParagraph:!1,hasLinkToPreviousParagraph:!1,paragraphType:"narration",nextParagraphs:[],previousParagraphs:[]}}},decreaseParagraphFromTotal:function(e,t){return{type:"DECREASE_PARAGRAPH_FROM_TOTAL",paragraphToDeleteInRegister:{depthNumber:e,paragraphNumber:t}}},syncRegistersInRedux:function(e,t,a){return{type:"SYNC_REGISTERS_IN_REDUX",paragraphRegisterFromFirestore:e,paragraphLinkRegisterFromFirestore:t,numDepthLevelsFromFirestore:a}},clearQuestData:function(){return{type:"CLEAR_QUEST_DATA"}},setToGlobalSaving:function(){return{type:"SET_TO_GLOBAL_SAVING"}}}))(He),qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=a.props,n=r.firestore,s=r.QuestUnderEdition,o={Title:a.TitleInput.current.value,Tags:a.TagsInput.current.value,Price:a.PriceInput.current.value,Level:a.LevelInput.current.value,Link:a.LinkInput.current.value,Location:a.LocationInput.current.value,Summary:a.SummaryInput.current.value,LastEditDate:V()},n.update({collection:"QuestsInProgress",doc:s.id},o).then(function(){return a.props.history.push("/questeditor/inprogress/")});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.TitleInput=n.a.createRef(),a.TagsInput=n.a.createRef(),a.PriceInput=n.a.createRef(),a.LevelInput=n.a.createRef(),a.LinkInput=n.a.createRef(),a.LocationInput=n.a.createRef(),a.SummaryInput=n.a.createRef(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.QuestUnderEdition;return e?n.a.createElement("div",{className:"container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px",width:"60%"}},n.a.createElement("h1",{style:{margin:"auto",display:"block",textAlign:"center",paddingTop:"15px"}},"Quest Parameters"," "),n.a.createElement("div",{style:{height:"15px"}}),n.a.createElement("div",{className:"row"},n.a.createElement(h.b,{to:"/questeditor/inprogress/",className:"btn",id:"BackToMenu"},n.a.createElement("i",{className:"fas fa-arrow-circle-left",id:"BackToMenu"})," Back to Quests in Progress")),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestTitle"},"Title"),n.a.createElement("input",{type:"text",className:"form-control",name:"Title",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},defaultValue:e.Title,onChange:this.onChange,ref:this.TitleInput})),n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestTags"},"Tags"),n.a.createElement("input",{type:"text",className:"form-control",name:"Tags",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},defaultValue:e.Tags,onChange:this.onChange,ref:this.TagsInput}))),n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestPrice"},"Price"),n.a.createElement("input",{type:"text",className:"form-control",name:"Price",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},defaultValue:e.Price,onChange:this.onChange,ref:this.PriceInput})),n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestLevel"},"Level"),n.a.createElement("input",{type:"text",className:"form-control",name:"Level",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},defaultValue:e.Level,onChange:this.onChange,ref:this.LevelInput}))),n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px"}},n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestLink"},"Link"),n.a.createElement("input",{type:"text",className:"form-control",name:"Link",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},defaultValue:e.Link,onChange:this.onChange,ref:this.LinkInput})),n.a.createElement("div",{className:"form-group col-md-6"},n.a.createElement("label",{className:"label-parameter",htmlFor:"QuestLocation"},"Location"),n.a.createElement("input",{type:"text",className:"form-control",name:"Location",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},defaultValue:e.Location,onChange:this.onChange,ref:this.LocationInput}))),n.a.createElement("div",{className:"form-row",style:{paddingLeft:"10px",paddingRight:"10px",paddingBottom:"10px"}},n.a.createElement("label",{className:"label-parameter",htmlFor:"Text"},"Summary"),n.a.createElement("textarea",{type:"text",className:"form-control",name:"Summary",maxLength:"100",rows:"2",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},defaultValue:e.Summary,onChange:this.onChange,ref:this.SummaryInput})),n.a.createElement("div",{style:{height:"10px"}}),n.a.createElement("button",{type:"submit",className:"btn btn-dark",style:{left:"50%",position:"absolute",transform:"translateX(-50%)",marginTop:"15px"}},"Save and update quest parameters"," ")),n.a.createElement("div",{className:"row"},n.a.createElement(h.b,{to:"/questeditor/questbuilder/".concat(e.id),className:"btn btn-dark",style:{width:"25%",margin:"auto",display:"block",marginTop:"65px"}},"Go to Quest Builder"))):n.a.createElement(R,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}})}}]),t}(r.Component),Ke=Object(g.c)(Object(x.firestoreConnect)(function(e){return[{collection:"QuestsInProgress",storeAs:"QuestUnderEdition",doc:e.match.params.id}]}),Object(m.connect)(function(e,t){var a=e.firestore.ordered;return{QuestUnderEdition:a.QuestUnderEdition&&a.QuestUnderEdition[0]}}))(qe),We=a(428),Xe=a.n(We),_e=function(e){var t=e.message,a=e.messageType;return n.a.createElement("div",{className:Xe()("alert",{"alert-ok":"success"===a,"alert-failed":"error-login"===a||"error-register"===a})},t)},Ye=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",password:""},a.onChange=function(e){return a.setState(Object(H.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.props,r=t.firebase,n=t.notifyUser,s=a.state,o=s.email,i=s.password;r.login({email:o,password:i}).catch(function(e){return n("Invalid Login Credentials !","error-login")})},a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.notify,t=e.message,a=e.messageType;return n.a.createElement("div",{className:"container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4 mx-auto"},n.a.createElement("div",{className:"card card-login"},n.a.createElement("div",{className:"card-body"},"error-login"===a?n.a.createElement(_e,{message:t,messageType:a}):null,n.a.createElement("h1",{className:"text-center pb-4 pt-3"},n.a.createElement("span",{className:"text-secondary"},n.a.createElement("i",{className:"fas fa-lock"})," Login")),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"text",className:"form-control",name:"email",required:!0,value:this.state.email,onChange:this.onChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",className:"form-control",name:"password",required:!0,value:this.state.password,onChange:this.onChange})),n.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-dark btn-block"})))))))}}]),t}(r.Component),Je=Object(g.c)(Object(x.firebaseConnect)(),Object(m.connect)(function(e,t){return{notify:e.notify}},{notifyUser:F}))(Ye),Ze=a(21),$e=a.n(Ze),et=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",password:"",accountName:""},a.onChange=function(e){return a.setState(Object(H.a)({},e.target.name,e.target.value))},a.onSubmit=function(){var e=Object(B.a)(U.a.mark(function e(t){var r,n,s,o,i,p,c,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props,n=r.firebase,s=r.notifyUser,o=a.state,i=o.email,p=o.password,c=o.accountName,e.next=5,n.createUser({email:i,password:p}).catch(function(e){return s("That User Already Exists","error-register")});case 5:return e.next=7,n.auth().currentUser;case 7:if(!(u=e.sent)){e.next=12;break}return e.next=11,u.updateProfile({displayName:c});case 11:a.props.history.push("/questeditor/menu/");case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.notify,t=e.message,a=e.messageType;return n.a.createElement("div",{className:"container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)",marginTop:"-50px"}},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4 mx-auto"},n.a.createElement("div",{className:"card card-register"},n.a.createElement("div",{className:"card-body"},"error-register"===a?n.a.createElement(_e,{message:t,messageType:a}):null,n.a.createElement("h1",{className:"text-center pb-4 pt-3"},n.a.createElement("span",{className:"text-secondary"},n.a.createElement("i",{className:"fa fa-user-circle"})," Register")),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"accountName"},"Account Name"),n.a.createElement("input",{type:"text",className:"form-control",name:"accountName",required:!0,value:this.state.accountName,onChange:this.onChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"text",className:"form-control",name:"email",required:!0,value:this.state.email,onChange:this.onChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",className:"form-control",name:"password",minLength:"6",required:!0,value:this.state.password,onChange:this.onChange})),n.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-dark btn-block"})))))))}}]),t}(r.Component);et.propTyopes={firebase:$e.a.object.isRequired,notify:$e.a.object.isRequired,notifyUser:$e.a.func.isRequired};var tt=Object(g.c)(Object(x.firebaseConnect)(),Object(m.connect)(function(e,t){return{notify:e.notify}},{notifyUser:F}))(et),at=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={numChildren:0},a.onAddChild=function(){a.setState({numChildren:a.state.numChildren+1})},a}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<this.state.numChildren;t+=1)e.push(n.a.createElement(nt,{key:t,number:t}));return n.a.createElement(rt,{addChild:this.onAddChild},e)}}]),t}(r.Component),rt=function(e){return n.a.createElement("div",{className:"card calculator"},n.a.createElement("p",null,n.a.createElement("a",{href:"#",onClick:e.addChild},"Add Another Child Component")),n.a.createElement("div",{id:"children-pane"},e.children))},nt=function(e){return n.a.createElement("div",null,"I am child "+e.number)},st=at,ot=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(m.Provider,{store:P},n.a.createElement(h.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(Q,null),n.a.createElement(d.d,null,n.a.createElement(d.b,{exact:!0,path:"/login/",component:C(Je)}),n.a.createElement(d.b,{exact:!0,path:"/register/",component:C(tt)}),n.a.createElement(d.b,{exact:!0,path:"/questeditor/menu/",component:D(G)}),n.a.createElement(d.b,{exact:!0,path:"/questeditor/newquest/",component:D(W)}),n.a.createElement(d.b,{exact:!0,path:"/questeditor/inprogress/",component:D(Y)}),n.a.createElement(d.b,{exact:!0,path:"/questeditor/submitted/",component:D(te)}),n.a.createElement(d.b,{exact:!0,path:"/questeditor/questbuilder/:id",component:D(Ve)}),n.a.createElement(d.b,{exact:!0,path:"/questeditor/details/:id",component:D(Ke)}),n.a.createElement(d.b,{exact:!0,path:"/appcomponent",component:D(st)})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[429,1,2]]]);
//# sourceMappingURL=main.7e9133aa.chunk.js.map